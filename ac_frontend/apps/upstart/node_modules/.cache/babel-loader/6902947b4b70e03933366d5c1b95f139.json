{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\store\\index.js","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\store\\index.js","mtime":1621542642750},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGRlZmF1bHQgYXMgQVBJX0VORFBPSU5UUyB9IGZyb20gJy4uL2FwaSc7CmltcG9ydCBjcmVhdGVQZXJzaXN0ZWRTdGF0ZSBmcm9tICd2dWV4LXBlcnNpc3RlZHN0YXRlJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHsgVXNlclJlZ2lzdHJ5Q2xpZW50IH0gZnJvbSAiQC9jbGllbnQvdXNlcl9yZWdpc3RyeV9ncnBjX3dlYl9wYiI7ClZ1ZS51c2UoVnVleCk7CnZhciB1c2VyUmVnaXN0cnlDbGllbnQgPSBuZXcgVXNlclJlZ2lzdHJ5Q2xpZW50KHByb2Nlc3MuZW52LlZVRV9BUFBfTllYX0JBQ0tFTkRfRU5EUE9JTlQgKyBwcm9jZXNzLmVudi5WVUVfQVBQX05ZWF9CQUNLRU5EX1BPUlQsIG51bGwsIG51bGwpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgcGx1Z2luczogW2NyZWF0ZVBlcnNpc3RlZFN0YXRlKHsKICAgIHN0b3JhZ2U6IHdpbmRvdy5zZXNzaW9uU3RvcmFnZQogIH0pXSwKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHRva2VuOiBDb29raWVzLmdldCgndG9rZW4nKSB8fCAnJywKICAgIGNsYWltczoge30sCiAgICB1c2VyOiB7fQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBhdXRoX3JlcXVlc3Q6IGZ1bmN0aW9uIGF1dGhfcmVxdWVzdChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnbG9hZGluZyc7CiAgICB9LAogICAgYXV0aF9zdWNjZXNzOiBmdW5jdGlvbiBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ3N1Y2Nlc3MnOwogICAgICBzdGF0ZS50b2tlbiA9IHBheWxvYWQudG9rZW47CiAgICAgIHN0YXRlLmNsYWltcyA9IHBheWxvYWQuY2xhaW1zOwogICAgfSwKICAgIGF1dGhfZXJyb3I6IGZ1bmN0aW9uIGF1dGhfZXJyb3Ioc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2Vycm9yJzsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnJzsKICAgICAgc3RhdGUudG9rZW4gPSAnJzsKICAgICAgc3RhdGUudXNlciA9IHt9OwogICAgICBzdGF0ZS5jbGFpbXMgPSB7fTsKICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICB9LAogICAgcmVhZF91c2VyX3N1Y2Nlc3M6IGZ1bmN0aW9uIHJlYWRfdXNlcl9zdWNjZXNzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnVzZXIgPSBwYXlsb2FkOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIGNsYWltcykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY29tbWl0KCdhdXRoX3JlcXVlc3QnKTsKICAgICAgICB1c2VyUmVnaXN0cnlDbGllbnQubG9naW5Vc2VyKGNsYWltcywge30sIGZ1bmN0aW9uIChlcnIsIHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICB2YXIgcmVzcCA9IHJlc3BvbnNlLnRvT2JqZWN0KCk7CiAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3Auand0dG9rZW47CiAgICAgICAgICAgIHZhciBfY2xhaW1zID0gcmVzcC5jbGFpbXM7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgICAgQ29va2llcy5zZXQoJ3Rva2VuJywgdG9rZW4sICd2YWx1ZScsIHsKICAgICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICAgIH0pOyAvLyAyIGRheXMKCiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkX2luJywgdHJ1ZSk7IC8vIGZvciB0cmlnZ2VyaW5nIHN0b3JhZ2UgY2hhbmdlIGV2ZW50CgogICAgICAgICAgICBDb29raWVzLnNldCgnY2xhaW1zJywgSlNPTi5zdHJpbmdpZnkoX2NsYWltcyksICd2YWx1ZScsIHsKICAgICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdG9rZW47CiAgICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgewogICAgICAgICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICAgICAgICBjbGFpbXM6IF9jbGFpbXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjIsIGNsYWltcykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgdXNlclJlZ2lzdHJ5Q2xpZW50LmNyZWF0ZVVzZXIoY2xhaW1zLCB7fSwgZnVuY3Rpb24gKGVyciwgcmVzcG9uc2UpIHsKICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgIHZhciByZXNwID0gcmVzcG9uc2UudG9PYmplY3QoKTsKICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzcC5qd3R0b2tlbjsKICAgICAgICAgICAgdmFyIF9jbGFpbXMyID0gcmVzcC5jbGFpbXM7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgICAgQ29va2llcy5zZXQoJ3Rva2VuJywgdG9rZW4sICd2YWx1ZScsIHsKICAgICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICAgIH0pOyAvLyAyIGRheXMKCiAgICAgICAgICAgIENvb2tpZXMuc2V0KCdjbGFpbXMnLCBKU09OLnN0cmluZ2lmeShfY2xhaW1zMiksICd2YWx1ZScsIHsKICAgICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvZ2dlZF9pbicsIHRydWUpOwogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdG9rZW47CiAgICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIF9jbGFpbXMyKTsKICAgICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicsIGVycik7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvZ2dlZF9pbicsIGZhbHNlKTsKICAgICAgICBDb29raWVzLnJlbW92ZSgndG9rZW4nKTsKICAgICAgICBDb29raWVzLnJlbW92ZSgnY2xhaW1zJyk7CiAgICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlYWRVc2VyOiBmdW5jdGlvbiByZWFkVXNlcihfcmVmNCwgZW1haWwpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcmVxdWVzdGVyRW1haWw6IGVtYWlsCiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiBBUElfRU5EUE9JTlRTLlJFQURfVVNFUihlbWFpbCksCiAgICAgICAgICBwYXJhbXM6IGRhdGEsCiAgICAgICAgICBtZXRob2Q6ICdHRVQnCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgdmFyIHVzZXIgPSByZXNwLmRhdGE7CiAgICAgICAgICBjb21taXQoJ3JlYWRfdXNlcl9zdWNjZXNzJywgdXNlcik7CiAgICAgICAgICByZXNvbHZlKHJlc3ApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudG9rZW4gJiYgISFDb29raWVzLmdldCgndG9rZW4nKSAmJiAhIUNvb2tpZXMuZ2V0KCdjbGFpbXMnKTsKICAgIH0sCiAgICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0dXM7CiAgICB9LAogICAgY2xhaW1zOiBmdW5jdGlvbiBjbGFpbXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmNsYWltcyB8fCBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCdjbGFpbXMnKSk7CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHZhciBfc3RhdGUkY2xhaW1zLCBfSlNPTiRwYXJzZTsKCiAgICAgIHJldHVybiAoKF9zdGF0ZSRjbGFpbXMgPSBzdGF0ZS5jbGFpbXMpID09PSBudWxsIHx8IF9zdGF0ZSRjbGFpbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSRjbGFpbXMudG9rZW4pIHx8ICgoX0pTT04kcGFyc2UgPSBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCdjbGFpbXMnKSkpID09PSBudWxsIHx8IF9KU09OJHBhcnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfSlNPTiRwYXJzZS50b2tlbik7CiAgICB9LAogICAgZW1haWw6IGZ1bmN0aW9uIGVtYWlsKHN0YXRlKSB7CiAgICAgIHZhciBfc3RhdGUkY2xhaW1zMiwgX0pTT04kcGFyc2UyOwoKICAgICAgcmV0dXJuICgoX3N0YXRlJGNsYWltczIgPSBzdGF0ZS5jbGFpbXMpID09PSBudWxsIHx8IF9zdGF0ZSRjbGFpbXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGUkY2xhaW1zMi5lbWFpbCkgfHwgKChfSlNPTiRwYXJzZTIgPSBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCdjbGFpbXMnKSkpID09PSBudWxsIHx8IF9KU09OJHBhcnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX0pTT04kcGFyc2UyLmVtYWlsKTsKICAgIH0sCiAgICB1c2VyU2NvcGU6IGZ1bmN0aW9uIHVzZXJTY29wZShzdGF0ZSkgewogICAgICB2YXIgX3N0YXRlJGNsYWltczMsIF9KU09OJHBhcnNlMzsKCiAgICAgIHJldHVybiAoKF9zdGF0ZSRjbGFpbXMzID0gc3RhdGUuY2xhaW1zKSA9PT0gbnVsbCB8fCBfc3RhdGUkY2xhaW1zMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGNsYWltczMuc2NvcGUpIHx8ICgoX0pTT04kcGFyc2UzID0gSlNPTi5wYXJzZShDb29raWVzLmdldCgnY2xhaW1zJykpKSA9PT0gbnVsbCB8fCBfSlNPTiRwYXJzZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9KU09OJHBhcnNlMy51c2VyU2NvcGUpOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9KTs="},{"version":3,"sources":["D:/Go/src/alphacare/ac_frontend/apps/admin/src/store/index.js"],"names":["Vue","Vuex","axios","default","API_ENDPOINTS","createPersistedState","Cookies","UserRegistryClient","use","userRegistryClient","process","env","VUE_APP_NYX_BACKEND_ENDPOINT","VUE_APP_NYX_BACKEND_PORT","Store","plugins","storage","window","sessionStorage","state","status","token","get","claims","user","mutations","auth_request","auth_success","payload","auth_error","logout","clear","localStorage","read_user_success","actions","login","commit","Promise","resolve","reject","loginUser","err","response","resp","toObject","jwttoken","setItem","set","expires","JSON","stringify","defaults","headers","common","removeItem","register","createUser","remove","readUser","email","data","requesterEmail","url","READ_USER","params","method","then","catch","getters","isLoggedIn","authStatus","parse","userScope","scope","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport axios from 'axios'\r\nimport { default as API_ENDPOINTS} from '../api'\r\nimport createPersistedState from 'vuex-persistedstate'\r\nimport Cookies from 'js-cookie'\r\nimport {UserRegistryClient} from \"@/client/user_registry_grpc_web_pb\";\r\n\r\nVue.use(Vuex)\r\n\r\nlet userRegistryClient = new UserRegistryClient(process.env.VUE_APP_NYX_BACKEND_ENDPOINT+process.env.VUE_APP_NYX_BACKEND_PORT, null, null);\r\n\r\nexport default new Vuex.Store({\r\n    plugins: [createPersistedState({\r\n        storage: window.sessionStorage,\r\n    })],\r\n    state: {\r\n        status: '',\r\n        token: Cookies.get('token') || '',\r\n        claims:{},\r\n        user:{}\r\n  },\r\n  mutations: {\r\n      auth_request(state){\r\n          state.status = 'loading'\r\n      },\r\n      auth_success(state, payload){\r\n          state.status = 'success'\r\n          state.token = payload.token\r\n          state.claims = payload.claims\r\n      },\r\n      auth_error(state){\r\n          state.status = 'error'\r\n      },\r\n      logout(state){\r\n          state.status = ''\r\n          state.token = ''\r\n          state.user = {}\r\n          state.claims = {}\r\n          sessionStorage.clear()\r\n          localStorage.clear()\r\n      },\r\n      read_user_success(state, payload){\r\n          state.user = payload\r\n      }\r\n  },\r\n  actions: {\r\n    login({commit}, claims){\r\n      return new Promise((resolve, reject) => {\r\n        commit('auth_request')\r\n        userRegistryClient.loginUser(claims, {}, (err, response) => {\r\n            if (!err) {\r\n                let resp = response.toObject()\r\n                const token = resp.jwttoken\r\n                const claims = resp.claims\r\n                localStorage.setItem('token', token)\r\n                Cookies.set('token', token, 'value', {expires: 2}) // 2 days\r\n                window.localStorage.setItem('logged_in', true) // for triggering storage change event\r\n                Cookies.set('claims', JSON.stringify(claims), 'value', {expires: 2})\r\n                axios.defaults.headers.common['Authorization'] = token\r\n                commit('auth_success', {token, claims})\r\n                resolve(resp)\r\n            } else {\r\n                commit('auth_error')\r\n                localStorage.removeItem('token')\r\n                reject(err)\r\n            }\r\n        })\r\n    })},\r\n    register({commit}, claims){\r\n      return new Promise((resolve, reject) => {\r\n          commit('auth_request')\r\n          userRegistryClient.createUser(claims, {}, (err, response) => {\r\n              if (!err) {\r\n                  let resp = response.toObject()\r\n                  const token = resp.jwttoken\r\n                  const claims = resp.claims\r\n                  localStorage.setItem('token', token)\r\n                  Cookies.set('token', token, 'value', {expires: 2}) // 2 days\r\n                  Cookies.set('claims', JSON.stringify(claims), 'value', {expires: 2})\r\n                  window.localStorage.setItem('logged_in', true)\r\n                  axios.defaults.headers.common['Authorization'] = token\r\n                  commit('auth_success', token, claims)\r\n                  resolve(resp)\r\n              } else {\r\n                  commit('auth_error', err)\r\n                  localStorage.removeItem('token')\r\n                  reject(err)\r\n              }\r\n        })\r\n    })},\r\n    logout({commit}){\r\n      return new Promise((resolve) => {\r\n          commit('logout')\r\n          localStorage.removeItem('token')\r\n          window.localStorage.setItem('logged_in', false)\r\n          Cookies.remove('token')\r\n          Cookies.remove('claims')\r\n          commit('logout')\r\n          delete axios.defaults.headers.common['Authorization']\r\n          resolve()\r\n      })\r\n    },\r\n    readUser({commit}, email){\r\n      const data = {requesterEmail: email}\r\n      return new Promise((resolve, reject) => {\r\n          axios({url: API_ENDPOINTS.READ_USER(email), params: data, method: 'GET' })\r\n              .then(resp => {\r\n                  const user = resp.data\r\n                  commit('read_user_success', user)\r\n                  resolve(resp)\r\n              })\r\n              .catch(err => {\r\n                  reject(err)\r\n              })\r\n      })\r\n    },\r\n  },\r\n  getters: {\r\n    isLoggedIn: state => !!state.token && !!Cookies.get('token') && !!Cookies.get('claims'),\r\n    authStatus: state => state.status,\r\n    claims: state => state.claims || JSON.parse(Cookies.get('claims')),\r\n    token: state => state.claims?.token || JSON.parse(Cookies.get('claims'))?.token,\r\n    email: state => state.claims?.email || JSON.parse(Cookies.get('claims'))?.email,\r\n    userScope: state => state.claims?.scope || JSON.parse(Cookies.get('claims'))?.userScope,\r\n    user: state => state.user\r\n  },\r\n  modules: {\r\n  }\r\n})\r\n"]}]}