{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\store\\index.js","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\store\\index.js","mtime":1621490932896},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGRlZmF1bHQgYXMgQVBJX0VORFBPSU5UUyB9IGZyb20gJy4uL2FwaSc7CmltcG9ydCBjcmVhdGVQZXJzaXN0ZWRTdGF0ZSBmcm9tICd2dWV4LXBlcnNpc3RlZHN0YXRlJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHsgVXNlclJlZ2lzdHJ5Q2xpZW50IH0gZnJvbSAiQC9jbGllbnQvdXNlcl9yZWdpc3RyeV9ncnBjX3dlYl9wYiI7ClZ1ZS51c2UoVnVleCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBwbHVnaW5zOiBbY3JlYXRlUGVyc2lzdGVkU3RhdGUoewogICAgc3RvcmFnZTogd2luZG93LnNlc3Npb25TdG9yYWdlCiAgfSldLAogIHVzZXJSZWdpc3RyeUNsaWVudDogbmV3IFVzZXJSZWdpc3RyeUNsaWVudCgiaHR0cDovL2xvY2FsaG9zdDo4MDgwIiwgbnVsbCwgbnVsbCksCiAgc3RhdGU6IHsKICAgIHN0YXR1czogJycsCiAgICB0b2tlbjogQ29va2llcy5nZXQoJ3Rva2VuJykgfHwgJycsCiAgICBjbGFpbXM6IHt9LAogICAgdXNlcjoge30KICB9LAogIG11dGF0aW9uczogewogICAgYXV0aF9yZXF1ZXN0OiBmdW5jdGlvbiBhdXRoX3JlcXVlc3Qoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2xvYWRpbmcnOwogICAgfSwKICAgIGF1dGhfc3VjY2VzczogZnVuY3Rpb24gYXV0aF9zdWNjZXNzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgc3RhdGUudG9rZW4gPSBwYXlsb2FkLnRva2VuOwogICAgICBzdGF0ZS5jbGFpbXMgPSBwYXlsb2FkLmNsYWltczsKICAgIH0sCiAgICBhdXRoX2Vycm9yOiBmdW5jdGlvbiBhdXRoX2Vycm9yKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdlcnJvcic7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJyc7CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLnVzZXIgPSB7fTsKICAgICAgc3RhdGUuY2xhaW1zID0ge307CiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgfSwKICAgIHJlYWRfdXNlcl9zdWNjZXNzOiBmdW5jdGlvbiByZWFkX3VzZXJfc3VjY2VzcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS51c2VyID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBjbGFpbXMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiBBUElfRU5EUE9JTlRTLkFVVEhFTlRJQ0FURSwKICAgICAgICAgIGRhdGE6IGNsYWltcywKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgdmFyIHRva2VuID0gcmVzcC5kYXRhLnRva2VuOwogICAgICAgICAgdmFyIGNsYWltcyA9IHJlc3AuZGF0YS5jbGFpbXM7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7CiAgICAgICAgICBDb29raWVzLnNldCgndG9rZW4nLCB0b2tlbiwgJ3ZhbHVlJywgewogICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICB9KTsgLy8gMiBkYXlzCgogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2dnZWRfaW4nLCB0cnVlKTsgLy8gZm9yIHRyaWdnZXJpbmcgc3RvcmFnZSBjaGFuZ2UgZXZlbnQKCiAgICAgICAgICBDb29raWVzLnNldCgnY2xhaW1zJywgSlNPTi5zdHJpbmdpZnkoY2xhaW1zKSwgJ3ZhbHVlJywgewogICAgICAgICAgICBleHBpcmVzOiAyCiAgICAgICAgICB9KTsKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgewogICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgIGNsYWltczogY2xhaW1zCiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc29sdmUocmVzcCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29tbWl0KCdhdXRoX2Vycm9yJyk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjIsIGNsYWltcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjb21taXQoJ2F1dGhfcmVxdWVzdCcpOwoKICAgICAgICBfdGhpcy51c2VyUmVnaXN0cnlDbGllbnQuY3JlYXRlVXNlcihjbGFpbXMsIHt9LCBmdW5jdGlvbiAoZXJyLCByZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2coIlhYWFhYWFhYWFhYWFgiKTsKICAgICAgICB9KTsgLy8gYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5TSUdOX1VQLCBkYXRhOiBjbGFpbXMsIG1ldGhvZDogJ1BPU1QnIH0pCiAgICAgICAgLy8gICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgIC8vICAgICAgICAgY29uc3QgdG9rZW4gPSByZXNwLmRhdGEudG9rZW4KICAgICAgICAvLyAgICAgICAgIGNvbnN0IGNsYWltcyA9IHJlc3AuZGF0YS5jbGFpbXMKICAgICAgICAvLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKQogICAgICAgIC8vICAgICAgICAgQ29va2llcy5zZXQoJ3Rva2VuJywgdG9rZW4sICd2YWx1ZScsIHtleHBpcmVzOiAyfSkgLy8gMiBkYXlzCiAgICAgICAgLy8gICAgICAgICBDb29raWVzLnNldCgnY2xhaW1zJywgSlNPTi5zdHJpbmdpZnkoY2xhaW1zKSwgJ3ZhbHVlJywge2V4cGlyZXM6IDJ9KQogICAgICAgIC8vICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2dnZWRfaW4nLCB0cnVlKQogICAgICAgIC8vICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuCiAgICAgICAgLy8gICAgICAgICBjb21taXQoJ2F1dGhfc3VjY2VzcycsIHRva2VuLCBjbGFpbXMpCiAgICAgICAgLy8gICAgICAgICByZXNvbHZlKHJlc3ApCiAgICAgICAgLy8gICAgIH0pCiAgICAgICAgLy8gICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgIC8vICAgICAgICAgY29tbWl0KCdhdXRoX2Vycm9yJywgZXJyKQogICAgICAgIC8vICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJykKICAgICAgICAvLyAgICAgICAgIHJlamVjdChlcnIpCiAgICAgICAgLy8gICAgIH0pCgogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBjb21taXQoJ2xvZ291dCcpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkX2luJywgZmFsc2UpOwogICAgICAgIENvb2tpZXMucmVtb3ZlKCd0b2tlbicpOwogICAgICAgIENvb2tpZXMucmVtb3ZlKCdjbGFpbXMnKTsKICAgICAgICBjb21taXQoJ2xvZ291dCcpOwogICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVhZFVzZXI6IGZ1bmN0aW9uIHJlYWRVc2VyKF9yZWY0LCBlbWFpbCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICByZXF1ZXN0ZXJFbWFpbDogZW1haWwKICAgICAgfTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBheGlvcyh7CiAgICAgICAgICB1cmw6IEFQSV9FTkRQT0lOVFMuUkVBRF9VU0VSKGVtYWlsKSwKICAgICAgICAgIHBhcmFtczogZGF0YSwKICAgICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICB2YXIgdXNlciA9IHJlc3AuZGF0YTsKICAgICAgICAgIGNvbW1pdCgncmVhZF91c2VyX3N1Y2Nlc3MnLCB1c2VyKTsKICAgICAgICAgIHJlc29sdmUocmVzcCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2dnZWRJbjogZnVuY3Rpb24gaXNMb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS50b2tlbiAmJiAhIUNvb2tpZXMuZ2V0KCd0b2tlbicpICYmICEhQ29va2llcy5nZXQoJ2NsYWltcycpOwogICAgfSwKICAgIGF1dGhTdGF0dXM6IGZ1bmN0aW9uIGF1dGhTdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXR1czsKICAgIH0sCiAgICBjbGFpbXM6IGZ1bmN0aW9uIGNsYWltcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY2xhaW1zIHx8IEpTT04ucGFyc2UoQ29va2llcy5nZXQoJ2NsYWltcycpKTsKICAgIH0sCiAgICB0b2tlbjogZnVuY3Rpb24gdG9rZW4oc3RhdGUpIHsKICAgICAgdmFyIF9zdGF0ZSRjbGFpbXMsIF9KU09OJHBhcnNlOwoKICAgICAgcmV0dXJuICgoX3N0YXRlJGNsYWltcyA9IHN0YXRlLmNsYWltcykgPT09IG51bGwgfHwgX3N0YXRlJGNsYWltcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGNsYWltcy50b2tlbikgfHwgKChfSlNPTiRwYXJzZSA9IEpTT04ucGFyc2UoQ29va2llcy5nZXQoJ2NsYWltcycpKSkgPT09IG51bGwgfHwgX0pTT04kcGFyc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9KU09OJHBhcnNlLnRva2VuKTsKICAgIH0sCiAgICBlbWFpbDogZnVuY3Rpb24gZW1haWwoc3RhdGUpIHsKICAgICAgdmFyIF9zdGF0ZSRjbGFpbXMyLCBfSlNPTiRwYXJzZTI7CgogICAgICByZXR1cm4gKChfc3RhdGUkY2xhaW1zMiA9IHN0YXRlLmNsYWltcykgPT09IG51bGwgfHwgX3N0YXRlJGNsYWltczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSRjbGFpbXMyLmVtYWlsKSB8fCAoKF9KU09OJHBhcnNlMiA9IEpTT04ucGFyc2UoQ29va2llcy5nZXQoJ2NsYWltcycpKSkgPT09IG51bGwgfHwgX0pTT04kcGFyc2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfSlNPTiRwYXJzZTIuZW1haWwpOwogICAgfSwKICAgIHVzZXJTY29wZTogZnVuY3Rpb24gdXNlclNjb3BlKHN0YXRlKSB7CiAgICAgIHZhciBfc3RhdGUkY2xhaW1zMywgX0pTT04kcGFyc2UzOwoKICAgICAgcmV0dXJuICgoX3N0YXRlJGNsYWltczMgPSBzdGF0ZS5jbGFpbXMpID09PSBudWxsIHx8IF9zdGF0ZSRjbGFpbXMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RhdGUkY2xhaW1zMy5zY29wZSkgfHwgKChfSlNPTiRwYXJzZTMgPSBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCdjbGFpbXMnKSkpID09PSBudWxsIHx8IF9KU09OJHBhcnNlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX0pTT04kcGFyc2UzLnVzZXJTY29wZSk7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"sources":["D:/Go/src/alphacare/ac_frontend/apps/admin/src/store/index.js"],"names":["Vue","Vuex","axios","default","API_ENDPOINTS","createPersistedState","Cookies","UserRegistryClient","use","Store","plugins","storage","window","sessionStorage","userRegistryClient","state","status","token","get","claims","user","mutations","auth_request","auth_success","payload","auth_error","logout","clear","localStorage","read_user_success","actions","login","commit","Promise","resolve","reject","url","AUTHENTICATE","data","method","then","resp","setItem","set","expires","JSON","stringify","defaults","headers","common","catch","err","removeItem","register","createUser","response","console","log","remove","readUser","email","requesterEmail","READ_USER","params","getters","isLoggedIn","authStatus","parse","userScope","scope","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport axios from 'axios'\r\nimport { default as API_ENDPOINTS} from '../api'\r\nimport createPersistedState from 'vuex-persistedstate'\r\nimport Cookies from 'js-cookie'\r\nimport {UserRegistryClient} from \"@/client/user_registry_grpc_web_pb\";\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n    plugins: [createPersistedState({\r\n        storage: window.sessionStorage,\r\n    })],\r\n    userRegistryClient: new UserRegistryClient(\"http://localhost:8080\", null, null),\r\n    state: {\r\n        status: '',\r\n        token: Cookies.get('token') || '',\r\n        claims:{},\r\n        user:{}\r\n  },\r\n  mutations: {\r\n      auth_request(state){\r\n          state.status = 'loading'\r\n      },\r\n      auth_success(state, payload){\r\n          state.status = 'success'\r\n          state.token = payload.token\r\n          state.claims = payload.claims\r\n      },\r\n      auth_error(state){\r\n          state.status = 'error'\r\n      },\r\n      logout(state){\r\n          state.status = ''\r\n          state.token = ''\r\n          state.user = {}\r\n          state.claims = {}\r\n          sessionStorage.clear()\r\n          localStorage.clear()\r\n      },\r\n      read_user_success(state, payload){\r\n          state.user = payload\r\n      }\r\n  },\r\n  actions: {\r\n    login({commit}, claims){\r\n      return new Promise((resolve, reject) => {\r\n        commit('auth_request')\r\n        axios({url: API_ENDPOINTS.AUTHENTICATE, data: claims, method: 'POST' })\r\n            .then(resp => {\r\n                const token = resp.data.token\r\n                const claims = resp.data.claims\r\n                localStorage.setItem('token', token)\r\n                Cookies.set('token', token, 'value', {expires: 2}) // 2 days\r\n                window.localStorage.setItem('logged_in', true) // for triggering storage change event\r\n                Cookies.set('claims', JSON.stringify(claims), 'value', {expires: 2})\r\n                axios.defaults.headers.common['Authorization'] = token\r\n                commit('auth_success', {token, claims})\r\n                resolve(resp)\r\n            })\r\n            .catch(err => {\r\n                  commit('auth_error')\r\n                  localStorage.removeItem('token')\r\n                  reject(err)\r\n            })\r\n      })\r\n    },\r\n    register({commit}, claims){\r\n      return new Promise((resolve, reject) => {\r\n          commit('auth_request')\r\n          this.userRegistryClient.createUser(claims, {}, (err, response) => {\r\n              console.log(\"XXXXXXXXXXXXX\");\r\n          })\r\n          // axios({url: API_ENDPOINTS.SIGN_UP, data: claims, method: 'POST' })\r\n          //     .then(resp => {\r\n          //         const token = resp.data.token\r\n          //         const claims = resp.data.claims\r\n          //         localStorage.setItem('token', token)\r\n          //         Cookies.set('token', token, 'value', {expires: 2}) // 2 days\r\n          //         Cookies.set('claims', JSON.stringify(claims), 'value', {expires: 2})\r\n          //         window.localStorage.setItem('logged_in', true)\r\n          //         axios.defaults.headers.common['Authorization'] = token\r\n          //         commit('auth_success', token, claims)\r\n          //         resolve(resp)\r\n          //     })\r\n          //     .catch(err => {\r\n          //         commit('auth_error', err)\r\n          //         localStorage.removeItem('token')\r\n          //         reject(err)\r\n          //     })\r\n      })\r\n    },\r\n    logout({commit}){\r\n      return new Promise((resolve) => {\r\n          commit('logout')\r\n          localStorage.removeItem('token')\r\n          window.localStorage.setItem('logged_in', false)\r\n          Cookies.remove('token')\r\n          Cookies.remove('claims')\r\n          commit('logout')\r\n          delete axios.defaults.headers.common['Authorization']\r\n          resolve()\r\n      })\r\n    },\r\n    readUser({commit}, email){\r\n      const data = {requesterEmail: email}\r\n      return new Promise((resolve, reject) => {\r\n          axios({url: API_ENDPOINTS.READ_USER(email), params: data, method: 'GET' })\r\n              .then(resp => {\r\n                  const user = resp.data\r\n                  commit('read_user_success', user)\r\n                  resolve(resp)\r\n              })\r\n              .catch(err => {\r\n                  reject(err)\r\n              })\r\n      })\r\n    },\r\n  },\r\n  getters: {\r\n    isLoggedIn: state => !!state.token && !!Cookies.get('token') && !!Cookies.get('claims'),\r\n    authStatus: state => state.status,\r\n    claims: state => state.claims || JSON.parse(Cookies.get('claims')),\r\n    token: state => state.claims?.token || JSON.parse(Cookies.get('claims'))?.token,\r\n    email: state => state.claims?.email || JSON.parse(Cookies.get('claims'))?.email,\r\n    userScope: state => state.claims?.scope || JSON.parse(Cookies.get('claims'))?.userScope,\r\n    user: state => state.user\r\n  },\r\n  modules: {\r\n  }\r\n})\r\n"]}]}