{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\CheckoutComfirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\CheckoutComfirm.vue","mtime":1604879633595},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0dvL3NyYy9hbHBoYWNhcmUvYWNfZnJvbnRlbmQvYXBwcy9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGxvYWRTdHJpcGUgfSBmcm9tICdAc3RyaXBlL3N0cmlwZS1qcyc7CmltcG9ydCB7IEV2ZW50QnVzIGFzIGJ1cyB9IGZyb20gIi4uL2V2ZW50X2J1cy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGRlZmF1bHQgYXMgQVBJX0VORFBPSU5UUyB9IGZyb20gIkAvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiBbJ3BsYW4nLCAnYWNjb3VudEluZm8nXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RyaXBlOiB7fSwKICAgICAgZWxlbWVudHM6IHt9LAogICAgICBjYXJkOiB7fSwKICAgICAgc3RyaXBlUHVibGljS2V5OiBwcm9jZXNzLmVudi5WVUVfQVBQX1NUUklQRV9QVUJMSUNfS0VZLAogICAgICBzbmFja2JhcjogZmFsc2UsCiAgICAgIG1zZzogIiIsCiAgICAgIGNvdXBvbjogIiIsCiAgICAgIGlzQ291cG9uVmFsaWQ6IGZhbHNlLAogICAgICBzaG93blByaWNlOiAiIgogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBjb3Vwb246IGZ1bmN0aW9uIGNvdXBvbigpIHsKICAgICAgdGhpcy5pc0NvdXBvblZhbGlkID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd25QcmljZSA9IHRoaXMucGxhbi5wcmljZTsKICAgIH0sCiAgICBwbGFuOiBmdW5jdGlvbiBwbGFuKCkgewogICAgICB0aGlzLnNob3duUHJpY2UgPSB0aGlzLnBsYW4ucHJpY2U7CiAgICAgIHRoaXMuaXNDb3Vwb25WYWxpZCA9IGZhbHNlOwogICAgICB0aGlzLmNvdXBvbiA9ICIiOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldEljb246IGZ1bmN0aW9uIGdldEljb24oKSB7CiAgICAgIGlmICghdGhpcy5jb3Vwb24pIHsKICAgICAgICByZXR1cm4gIm1kaS10aWNrZXQtcGVyY2VudC1vdXRsaW5lIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ291cG9uVmFsaWQpIHsKICAgICAgICByZXR1cm4gIm1kaS1jaGVjayI7CiAgICAgIH0KCiAgICAgIHJldHVybiAibWRpLWNsb3NlIjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyQ291cG9uOiBmdW5jdGlvbiBjbGVhckNvdXBvbigpIHsKICAgICAgaWYgKCF0aGlzLmlzQ291cG9uVmFsaWQgJiYgdGhpcy5jb3Vwb24pIHsKICAgICAgICB0aGlzLmNvdXBvbiA9ICIiOwogICAgICAgIHRoaXMuaXNDb3Vwb25WYWxpZCA9IGZhbHNlOwogICAgICAgIHRoaXMuc2hvd25QcmljZSA9IHRoaXMucGxhbi5wcmljZTsKICAgICAgfQogICAgfSwKICAgIGFwcGx5Q291cG9uOiBmdW5jdGlvbiBhcHBseUNvdXBvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucmVhZENvdXBvbigpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpcy5pc0NvdXBvblZhbGlkID0gdHJ1ZTsKICAgICAgICBfdGhpcy5zaG93blByaWNlID0gcmVzcC5kYXRhLnBlcmNlbnRfb2ZmIC8gMTAwICogX3RoaXMucGxhbi5wcmljZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmlzQ291cG9uVmFsaWQgPSBmYWxzZTsKICAgICAgICBfdGhpcy5jb3Vwb24gPSAiIjsKCiAgICAgICAgX3RoaXMuJHJlZnMuY291cG9uUmVmLmZvY3VzKCk7CgogICAgICAgIF90aGlzLnNob3dFcnJvck1lc3NhZ2UoIkNvdXBvbiBpcyBub3QgdmFsaWQiKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVhZENvdXBvbjogZnVuY3Rpb24gcmVhZENvdXBvbigpIHsKICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICB1cmw6IEFQSV9FTkRQT0lOVFMuUkVBRF9DT1VQT04odGhpcy5jb3Vwb24pLAogICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlU3Vic2NyaXB0aW9uOiBmdW5jdGlvbiB1cGRhdGVTdWJzY3JpcHRpb24oKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHByaWNlSWQ6IHRoaXMucGxhbi5wcmljZUlkCiAgICAgIH07CiAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgdXJsOiBBUElfRU5EUE9JTlRTLlVQREFURV9TVUJTQ1JJUFRJT04odGhpcy5hY2NvdW50SW5mby5lbWFpbCwgdGhpcy5hY2NvdW50SW5mby5zdWJzY3JpcHRpb25JZCksCiAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICBtZXRob2Q6ICdQVVQnCiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVNlc3Npb246IGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24oKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGNvdXBvbjogdGhpcy5jb3Vwb24sCiAgICAgICAgcHJpY2VJZDogdGhpcy5wbGFuLnByaWNlSWQsCiAgICAgICAgc3RyaXBlQ3VzdG9tZXJJZDogdGhpcy5hY2NvdW50SW5mby5zdHJpcGVDdXN0b21lcklkLAogICAgICAgIHBsYW46IHRoaXMucGxhbi5uYW1lLAogICAgICAgIHN1Y2Nlc3NVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfV0VCX0hPU1QgKyAiL3BsYW4/c3RhdHVzPW9rIiwKICAgICAgICBjYW5jZWxVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfV0VCX0hPU1QgKyAiL3BsYW4/c3RhdHVzPWZhaWxlZCIsCiAgICAgICAgZW1haWw6IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwgPyB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsIDogdGhpcy5hY2NvdW50SW5mby5lbWFpbAogICAgICB9OwogICAgICByZXR1cm4gYXhpb3MoewogICAgICAgIHVybDogQVBJX0VORFBPSU5UUy5DSEVDS09VVF9DUkVBVEVfU0VTU0lPTiwKICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrb3V0OiBmdW5jdGlvbiBjaGVja291dCgpIHsKICAgICAgdmFyIF90aGlzJGFjY291bnRJbmZvLAogICAgICAgICAgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICgoKF90aGlzJGFjY291bnRJbmZvID0gdGhpcy5hY2NvdW50SW5mbykgPT09IG51bGwgfHwgX3RoaXMkYWNjb3VudEluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFjY291bnRJbmZvLnN1YnNjcmlwdGlvblByaWNlSWQpID09ICIiKSB7CiAgICAgICAgLy8gaWYgdGhlIHVzZXIgaGFzIG5vIHN1YnNjcmlwdGlvblByaWNlSWQsIGl0IGlzIGEgYnJhbmQgbmV3IHN1YnNjcmlwdGlvbi4KICAgICAgICB0aGlzLmNyZWF0ZVNlc3Npb24oKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBfdGhpczIuc3RyaXBlLnJlZGlyZWN0VG9DaGVja291dCh7CiAgICAgICAgICAgIHNlc3Npb25JZDogcmVzcC5kYXRhLmlkCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuc2hvd0Vycm9yTWVzc2FnZSgiRmFpbGVkIHRvIGNyZWF0ZSBjaGVja291dCBzZXNzaW9uLCBwbGVhc2UgdHJ5IGFnYWluLiIpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGlmIHRoZSB1c2VyIGhhcyBhIHN1YnNjcmlwdGlvblByaWNlSWQsIGl0IG1lYW5zIHRoYXQgdGhlIHVzZXIgaGFzIGFscmVhZHkgc3Vic2NyaWJlZC4KICAgICAgICAvLyBzbyBoZXJlIHdlIGp1c3QgbmVlZCB0byB1cGRhdGUgdGhlIHByaWNlSWQgaW4gdGhlIHVzZXIgY3VycmVudCBzdWJzY3JpcHRpb24uCiAgICAgICAgLy8gcHJpY2Ugd2lsbCBiZSBhZGp1c3RlZCBvbiBhIHByb3JhdGlvbiBiYXNpcyBieSBTdHJpcGUuIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9zdWJzY3JpcHRpb25zL3VwZGF0ZQogICAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9uKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuJGVtaXQoImNsb3NlRGlhbG9nIik7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnNob3dFcnJvck1lc3NhZ2UoImZhaWxlZCB0byBjaGFuZ2UgcGxhbiwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlciIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2hvd0Vycm9yTWVzc2FnZTogZnVuY3Rpb24gc2hvd0Vycm9yTWVzc2FnZShtc2cpIHsKICAgICAgdGhpcy5tc2cgPSBtc2c7CiAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGJ1cy4kb24oJ3Byb2NlZWRUb0NoZWNrb3V0JywgdGhpcy5jaGVja291dCk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NyZWF0ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gbG9hZFN0cmlwZSh0aGlzLnN0cmlwZVB1YmxpY0tleSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGhpcy5zdHJpcGUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHRoaXMuc2hvd25QcmljZSA9IHRoaXMucGxhbi5wcmljZTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgcmV0dXJuIF9jcmVhdGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIGNyZWF0ZWQ7CiAgfSgpCn07"},{"version":3,"sources":["CheckoutComfirm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <v-flex xs12>\r\n      <v-row>\r\n        <v-col class=\"ml-5\">\r\n        <img\r\n            :src=\"plan.icon\"\r\n            width=\"100px\"\r\n        />\r\n        </v-col>\r\n        <v-col class=\"mt-5 ml-16\">\r\n          <h3>{{plan.name}}</h3>\r\n          <h5 v-if=\"shownPrice==plan.price\">${{plan.price}} / month</h5>\r\n          <div v-else>\r\n            <h5><strike>${{plan.price}} / month</strike></h5>\r\n            <h5 style=\"color:red;\">${{shownPrice}} / month</h5>\r\n          </div>\r\n        </v-col>\r\n      </v-row>\r\n    </v-flex>\r\n    <v-flex xs12>\r\n      <v-row>\r\n        <v-col class=\"ml-5\">\r\n          <v-text-field ref=\"couponRef\" @click:append=\"clearCoupon\" :append-icon=\"getIcon\" outlined dense label=\"Coupon\" v-model=\"coupon\" style=\"width:195px\"></v-text-field>\r\n        </v-col>\r\n        <v-col>\r\n          <v-btn outlined tile @click=\"applyCoupon\" :disabled=\"!coupon\">Apply</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n    </v-flex>\r\n    <v-snackbar v-model=\"snackbar\" timeout=\"4000\" @click=\"snackbar=false\">\r\n      {{msg}}\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn\r\n            color=\"pink\"\r\n            text\r\n            v-bind=\"attrs\"\r\n            @click=\"snackbar = false\"\r\n        >\r\n          Close\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport {loadStripe} from '@stripe/stripe-js';\r\nimport {EventBus as bus} from \"../event_bus.js\"\r\nimport axios from \"axios\";\r\nimport {default as API_ENDPOINTS} from \"@/api\";\r\n\r\nexport default {\r\n  components: {},\r\n  props: ['plan', 'accountInfo'],\r\n  data() {\r\n    return {\r\n      stripe: {},\r\n      elements: {},\r\n      card: {},\r\n      stripePublicKey: process.env.VUE_APP_STRIPE_PUBLIC_KEY,\r\n      snackbar: false,\r\n      msg: \"\",\r\n      coupon: \"\",\r\n      isCouponValid: false,\r\n      shownPrice: \"\"\r\n    }\r\n  },\r\n  watch: {\r\n    coupon: function () {\r\n      this.isCouponValid = false\r\n      this.shownPrice = this.plan.price\r\n    },\r\n    plan: function() {\r\n      this.shownPrice = this.plan.price\r\n      this.isCouponValid = false\r\n      this.coupon = \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    getIcon() {\r\n      if (!this.coupon) {\r\n        return \"mdi-ticket-percent-outline\"\r\n      } else if (this.isCouponValid) {\r\n        return \"mdi-check\"\r\n      }\r\n      return \"mdi-close\"\r\n    }\r\n  },\r\n  methods: {\r\n    clearCoupon() {\r\n      if (!this.isCouponValid && this.coupon) {\r\n        this.coupon = \"\"\r\n        this.isCouponValid = false\r\n        this.shownPrice = this.plan.price\r\n      }\r\n    },\r\n    applyCoupon() {\r\n      this.readCoupon()\r\n          .then((resp) => {\r\n            this.isCouponValid = true\r\n            this.shownPrice = resp.data.percent_off / 100 * this.plan.price\r\n          })\r\n          .catch(() => {\r\n            this.isCouponValid = false\r\n            this.coupon = \"\"\r\n            this.$refs.couponRef.focus()\r\n            this.showErrorMessage(\"Coupon is not valid\")\r\n          })\r\n    },\r\n    readCoupon() {\r\n      return axios({\r\n        url: API_ENDPOINTS.READ_COUPON(this.coupon),\r\n        method: 'GET'\r\n      })\r\n    },\r\n    updateSubscription() {\r\n      const data = {\r\n        priceId: this.plan.priceId,\r\n      }\r\n      return axios({\r\n        url: API_ENDPOINTS.UPDATE_SUBSCRIPTION(this.accountInfo.email, this.accountInfo.subscriptionId),\r\n        data: data,\r\n        method: 'PUT'\r\n      })\r\n    },\r\n    createSession() {\r\n      const data = {\r\n        coupon: this.coupon,\r\n        priceId: this.plan.priceId,\r\n        stripeCustomerId: this.accountInfo.stripeCustomerId,\r\n        plan: this.plan.name,\r\n        successUrl: process.env.VUE_APP_WEB_HOST +\"/plan?status=ok\",\r\n        cancelUrl: process.env.VUE_APP_WEB_HOST + \"/plan?status=failed\",\r\n        email: this.$store.getters.email ? this.$store.getters.email : this.accountInfo.email\r\n      }\r\n      return axios({url: API_ENDPOINTS.CHECKOUT_CREATE_SESSION, data: data, method: 'POST' })\r\n    },\r\n    checkout() {\r\n      if (this.accountInfo?.subscriptionPriceId == \"\") {\r\n        // if the user has no subscriptionPriceId, it is a brand new subscription.\r\n        this.createSession().\r\n        then((resp) => {\r\n          this.stripe.redirectToCheckout({ sessionId: resp.data.id })\r\n        }).\r\n        catch(() => {\r\n          this.showErrorMessage(\"Failed to create checkout session, please try again.\")\r\n        })\r\n      } else {\r\n        // if the user has a subscriptionPriceId, it means that the user has already subscribed.\r\n        // so here we just need to update the priceId in the user current subscription.\r\n        // price will be adjusted on a proration basis by Stripe. https://stripe.com/docs/api/subscriptions/update\r\n        this.updateSubscription().\r\n            then(() => {\r\n              this.$emit(\"closeDialog\")\r\n        }).catch(() => {\r\n          this.showErrorMessage(\"failed to change plan, please try again later\")\r\n        })\r\n      }\r\n    },\r\n    showErrorMessage(msg) {\r\n      this.msg = msg\r\n      this.snackbar = true\r\n    }\r\n  },\r\n  mounted() {\r\n    bus.$on('proceedToCheckout', this.checkout)\r\n  },\r\n  created: async function () {\r\n    this.stripe = await loadStripe(this.stripePublicKey)\r\n    this.shownPrice = this.plan.price\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components"}]}