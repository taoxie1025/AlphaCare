{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Auth.vue","mtime":1621490512771},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb25maXJtRGlhbG9nIGZyb20gIi4vQ29uZmlybURpYWxvZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7ZGVmYXVsdCBhcyBBUElfRU5EUE9JTlRTfSBmcm9tICJAL2FwaSI7CmltcG9ydCB7IENyZWF0ZVVzZXJSZXF1ZXN0IH0gZnJvbSAiLi4vY2xpZW50L3VzZXJfcmVnaXN0cnlfcGIiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHtDb25maXJtRGlhbG9nfSwKICBwcm9wczogWwogICAgJ3RhYicKICBdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1VwZGF0aW5nOiBmYWxzZSwKICAgICAgaXNQYXNzd29yZFJlY292ZXI6IGZhbHNlLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICB0YWJzOiBbCiAgICAgICAge25hbWU6IkxvZ2luIiwgaWNvbjoibWRpLWFjY291bnQifSwKICAgICAgICB7bmFtZToiUmVnaXN0ZXIiLCBpY29uOiJtZGktYWNjb3VudC1vdXRsaW5lIn0KICAgICAgXSwKICAgICAgdmFsaWQ6IHRydWUsCgogICAgICBmaXJzdE5hbWU6ICIiLAogICAgICBsYXN0TmFtZTogIiIsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICB2ZXJpZnk6ICIiLAogICAgICBsb2dpblBhc3N3b3JkOiAiIiwKICAgICAgbG9naW5FbWFpbDogIiIsCiAgICAgIGxvZ2luRW1haWxSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8ICJSZXF1aXJlZCIsCiAgICAgICAgdiA9PiAvLitALitcLi4rLy50ZXN0KHYpIHx8ICJFLW1haWwgbXVzdCBiZSB2YWxpZCIKICAgICAgXSwKICAgICAgZW1haWxSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8ICJSZXF1aXJlZCIsCiAgICAgICAgdiA9PiAvLitALitcLi4rLy50ZXN0KHYpIHx8ICJFLW1haWwgbXVzdCBiZSB2YWxpZCIKICAgICAgXSwKCiAgICAgIHNob3cxOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICByZXF1aXJlZDogdmFsdWUgPT4gISF2YWx1ZSB8fCAiUmVxdWlyZWQuIiwKICAgICAgICBtaW46IHYgPT4gKHYgJiYgdi5sZW5ndGggPj0gNCkgfHwgIk1pbiA0IGNoYXJhY3RlcnMiCiAgICAgIH0KICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBpc0VtYWlsKGVtYWlsKSB7CiAgICAgIGNvbnN0IHJlID0gL1xTK0BcUytcLlxTKy87CiAgICAgIHJldHVybiByZS50ZXN0KGVtYWlsKTsKICAgIH0sCiAgICBzZW5kUmVzZXRMaW5rKCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWUKICAgICAgICBjb25zdCBkYXRhID0ge2VtYWlsOiB0aGlzLmxvZ2luRW1haWx9CiAgICAgICAgYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5SRVNFVF9QQVNTV09SRCwgZGF0YTogZGF0YSwgbWV0aG9kOiAnUE9TVCd9KQogICAgICAgICAgICAudGhlbihyZXNwID0+IHsKICAgICAgICAgICAgICByZXNvbHZlKHJlc3ApCiAgICAgICAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgIHJlamVjdChlcnIpCiAgICAgICAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgc2hvd0ZvcmdvdFBhc3N3b3JkKCkgewogICAgICB0aGlzLmlzUGFzc3dvcmRSZWNvdmVyID0gIXRoaXMuaXNQYXNzd29yZFJlY292ZXIKICAgIH0sCiAgICB2YWxpZGF0ZUxvZ2luKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHRoaXMuc2lnbmluKCk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZVNpZ25VcCgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMucmVnaXN0ZXJGb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLnNpZ251cCgpOwogICAgICB9CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIC8vdGhpcy4kcmVmcy5sb2dpbkZvcm0ucmVzZXQoKTsKICAgICAgdGhpcy5sb2dpblBhc3N3b3JkID0gIiI7CiAgICAgIHRoaXMucGFzc3dvcmQgPSAiIjsKICAgIH0sCiAgICByZXNldFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgIH0sCiAgICBzaWdudXAoKSB7CiAgICAgIGxldCBjcmVhdGVVc2VyUmVxID0gbmV3IENyZWF0ZVVzZXJSZXF1ZXN0KCkKICAgICAgY3JlYXRlVXNlclJlcS5maXJzdE5hbWUgPSB0aGlzLmZpcnN0TmFtZQogICAgICBjcmVhdGVVc2VyUmVxLmxhc3ROYW1lID0gdGhpcy5sYXN0TmFtZQogICAgICBjcmVhdGVVc2VyUmVxLmVtYWlsID0gdGhpcy5lbWFpbAogICAgICBjcmVhdGVVc2VyUmVxLnBhc3N3b3JkID0gdGhpcy5wYXNzd29yZAoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JlZ2lzdGVyJywgY3JlYXRlVXNlclJlcSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvZ2luRW1haWwgPSB0aGlzLmVtYWlsCiAgICAgICAgICB0aGlzLmxvZ2luUGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkCiAgICAgICAgICB0aGlzLnNpZ25pbigpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGlmIChlcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKCiAgICBzaWduaW4oKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIGVtYWlsOiB0aGlzLmxvZ2luRW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMubG9naW5QYXNzd29yZAogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2dpbicsIGRhdGEpCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kYXNoYm9hcmQnKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgICAgICB9KQoKICAgIH0sCgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhc3N3b3JkTWF0Y2goKSB7CiAgICAgIHJldHVybiAoKSA9PiB0aGlzLnBhc3N3b3JkID09PSB0aGlzLnZlcmlmeSB8fCAiUGFzc3dvcmQgbXVzdCBtYXRjaCI7CiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n  <div id=\"app\">\r\n        <div>\r\n          <v-tabs v-model=\"tab\" show-arrows background-color=\"deep-purple accent-3\" icons-and-text dark grow>\r\n            <v-tabs-slider color=\"purple darken-4\"></v-tabs-slider>\r\n            <v-tab v-for=\"(tab,i) in tabs\" :key=\"tab+i\">\r\n              <v-icon large>{{ tab.icon }}</v-icon>\r\n              <div class=\"caption py-1\">{{ tab.name }}</div>\r\n            </v-tab>\r\n            <v-tab-item>\r\n              <v-card class=\"px-4\">\r\n                <v-card-text>\r\n                  <v-form ref=\"loginForm\" v-model=\"valid\" lazy-validation>\r\n                    <v-row>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"loginEmail\" :rules=\"loginEmailRules\" label=\"E-mail\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-if=\"!isPasswordRecover\" v-model=\"loginPassword\" :append-icon=\"show1?'eye':'eye-off'\" :rules=\"[rules.required, rules.min]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Password\" hint=\"At least 4 characters\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-col class=\"d-flex\" cols=\"12\" sm=\"3\" xsm=\"12\" align-end>\r\n                        <v-btn x-small block text  color=\"blue\" @click=\"showForgotPassword\" v-html=\"!isPasswordRecover ? `Forgot Password?` : `Login`\"></v-btn>\r\n                      </v-col>\r\n                      <v-spacer></v-spacer>\r\n                      <v-col class=\"d-flex\" cols=\"12\" sm=\"3\" xsm=\"12\" align-end>\r\n                        <v-btn v-if=\"!isPasswordRecover\" :disabled=\"!valid\" x-large block color=\"success\" @click=\"validateLogin\"> Login </v-btn>\r\n                        <v-btn v-else x-large block :disabled=\"isUpdating || !isEmail(loginEmail)\" color=\"success\" @click=\"dialog=true\"> Continue </v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-form>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-tab-item>\r\n            <v-tab-item>\r\n              <v-card class=\"px-4\">\r\n                <v-card-text>\r\n                  <v-form ref=\"registerForm\" v-model=\"valid\" lazy-validation>\r\n                    <v-row>\r\n                      <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                        <v-text-field v-model=\"firstName\" :rules=\"[rules.required]\" label=\"First Name\" maxlength=\"20\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                        <v-text-field v-model=\"lastName\" :rules=\"[rules.required]\" label=\"Last Name\" maxlength=\"20\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"email\" :rules=\"emailRules\" label=\"E-mail\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"password\" :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\" :rules=\"[rules.required, rules.min]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Password\" hint=\"At least 4 characters\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field block v-model=\"verify\" :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\" :rules=\"[rules.required, passwordMatch]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Confirm Password\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-spacer></v-spacer>\r\n                      <v-col class=\"d-flex ml-auto\" cols=\"12\" sm=\"3\" xsm=\"12\">\r\n                        <v-btn x-large block :disabled=\"!valid\" color=\"success\" @click=\"validateSignUp\">Register</v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-form>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-tab-item>\r\n          </v-tabs>\r\n          <v-row justify=\"center\">\r\n            <v-dialog v-model=\"dialog\" max-width=\"350\">\r\n              <confirm-dialog v-bind:title=\"`Password Recovery`\" :body=\"`If you have an account with us, a link will be sent to your email to reset your password. The link will be expired in 1 hour.`\" @yes=\"sendResetLink\" @no=\"dialog=false\"></confirm-dialog>\r\n            </v-dialog>\r\n          </v-row>\r\n        </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import ConfirmDialog from \"./ConfirmDialog\";\r\n  import axios from \"axios\";\r\n  import {default as API_ENDPOINTS} from \"@/api\";\r\n  import { CreateUserRequest } from \"../client/user_registry_pb\";\r\n\r\n  export default {\r\n    components: {ConfirmDialog},\r\n    props: [\r\n      'tab'\r\n    ],\r\n    data() {\r\n      return {\r\n        isUpdating: false,\r\n        isPasswordRecover: false,\r\n        dialog: false,\r\n        tabs: [\r\n          {name:\"Login\", icon:\"mdi-account\"},\r\n          {name:\"Register\", icon:\"mdi-account-outline\"}\r\n        ],\r\n        valid: true,\r\n\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        verify: \"\",\r\n        loginPassword: \"\",\r\n        loginEmail: \"\",\r\n        loginEmailRules: [\r\n          v => !!v || \"Required\",\r\n          v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n        ],\r\n        emailRules: [\r\n          v => !!v || \"Required\",\r\n          v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n        ],\r\n\r\n        show1: false,\r\n        rules: {\r\n          required: value => !!value || \"Required.\",\r\n          min: v => (v && v.length >= 4) || \"Min 4 characters\"\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      isEmail(email) {\r\n        const re = /\\S+@\\S+\\.\\S+/;\r\n        return re.test(email);\r\n      },\r\n      sendResetLink() {\r\n        return new Promise((resolve, reject) => {\r\n          this.isUpdating = true\r\n          const data = {email: this.loginEmail}\r\n          axios({url: API_ENDPOINTS.RESET_PASSWORD, data: data, method: 'POST'})\r\n              .then(resp => {\r\n                resolve(resp)\r\n                this.isUpdating = false\r\n                this.dialog = false\r\n              })\r\n              .catch(err => {\r\n                reject(err)\r\n                this.isUpdating = false\r\n                this.dialog = false\r\n              })\r\n        })\r\n      },\r\n      showForgotPassword() {\r\n        this.isPasswordRecover = !this.isPasswordRecover\r\n      },\r\n      validateLogin() {\r\n        if (this.$refs.loginForm.validate()) {\r\n          this.signin();\r\n        }\r\n      },\r\n      validateSignUp() {\r\n        if (this.$refs.registerForm.validate()) {\r\n          this.signup();\r\n        }\r\n      },\r\n      reset() {\r\n        //this.$refs.loginForm.reset();\r\n        this.loginPassword = \"\";\r\n        this.password = \"\";\r\n      },\r\n      resetValidation() {\r\n        this.$refs.form.resetValidation();\r\n      },\r\n      signup() {\r\n        let createUserReq = new CreateUserRequest()\r\n        createUserReq.firstName = this.firstName\r\n        createUserReq.lastName = this.lastName\r\n        createUserReq.email = this.email\r\n        createUserReq.password = this.password\r\n\r\n        this.$store.dispatch('register', createUserReq)\r\n          .then(() => {\r\n            this.loginEmail = this.email\r\n            this.loginPassword = this.password\r\n            this.signin()\r\n          })\r\n          .catch(err => {\r\n            if (err.length > 0) {\r\n              this.reset()\r\n            }\r\n          })\r\n      },\r\n\r\n      signin() {\r\n        let data = {\r\n          email: this.loginEmail,\r\n          password: this.loginPassword\r\n        }\r\n        this.$store.dispatch('login', data)\r\n                .then(() => {\r\n                  this.$router.push('/dashboard')\r\n                })\r\n                .catch(err => {\r\n                  if (err.length > 0) {\r\n                    this.reset()\r\n                  }\r\n                  this.reset()\r\n                })\r\n\r\n      },\r\n\r\n    },\r\n    computed: {\r\n      passwordMatch() {\r\n        return () => this.password === this.verify || \"Password must match\";\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    .v-content {\r\n      margin: 0;\r\n    }\r\n  }\r\n\r\n</style>\r\n"]}]}