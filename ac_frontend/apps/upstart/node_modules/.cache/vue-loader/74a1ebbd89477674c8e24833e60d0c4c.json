{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\SubscriberCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\SubscriberCard.vue","mtime":1600809190479},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCmltcG9ydCB7ZGVmYXVsdCBhcyBBUElfRU5EUE9JTlRTfSBmcm9tICJAL2FwaSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlN1YnNjcmliZXJDYXJkIiwNCiAgY29tcG9uZW50czoge30sDQogIHByb3BzOiBbDQogICAgICAncHJvamVjdElkJywNCiAgICAgICdlbWFpbCcsDQogICAgICAnc3Vic2NyaWJlcicsDQogICAgICAnaXNFZGl0aW5nJw0KICBdLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdWJzY3JpYmVyQ29weToge30sDQogICAgICBlbWFpbFJ1bGVzOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICJSZXF1aXJlZCIsDQogICAgICAgIHYgPT4gLy4rQC4rXC4uKy8udGVzdCh2KSB8fCAiRS1tYWlsIG11c3QgYmUgdmFsaWQiDQogICAgICBdLA0KICAgICAgYXJ0aWNsZUN1cnNvclJ1bGVzOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICJSZXF1aXJlZCIsDQogICAgICAgIHYgPT4gL15cZCskLy50ZXN0KHYpIHx8ICJBcnRpY2xlIE5vLiBtdXN0IGJlIGEgbnVtYmVyIg0KICAgICAgXSwNCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZSwNCiAgICAgIGRpc3BsYXllZE1lc3NhZ2U6ICIiLA0KICAgICAgc3Vic2NyaWJlclN0YXR1czogWw0KICAgICAgICB7b3B0aW9uOiAiRW5hYmxlZCIsIHZhbHVlOiB0cnVlfSwNCiAgICAgICAge29wdGlvbjogIkRpc2FibGVkIiwgdmFsdWU6IGZhbHNlfQ0KICAgICAgXQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKQ0KICAgIH0sDQogICAgY2xvc2VTaG93TWVzc2FnZSgpIHsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLnNob3dNZXNzYWdlID0gZmFsc2UNCiAgICAgIH0sIDYwMDApDQogICAgfSwNCiAgICBpc0VtYWlsVmFsaWQoZW1haWwpIHsNCiAgICAgIGlmICghKC8uK0AuK1wuLisvLnRlc3QoZW1haWwpKSkgew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlDQogICAgfSwNCiAgICBpc0FydGljbGVDdXJzb3JWYWxpZChhcnRpY2xlTnVtYmVyKSB7DQogICAgICBpZiAoISgvXlxkKyQvLnRlc3QoYXJ0aWNsZU51bWJlcikpKSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICBpZiAoIXRoaXMuaXNBcnRpY2xlQ3Vyc29yVmFsaWQodGhpcy5zdWJzY3JpYmVyQ29weS5hcnRpY2xlQ3Vyc29yKSkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuc2F2ZVN1YnNjcmliZXIoKQ0KICAgIH0sDQogICAgYWRkKCkgew0KICAgICAgaWYgKCF0aGlzLmlzRW1haWxWYWxpZCh0aGlzLnN1YnNjcmliZXJDb3B5LmVtYWlsKSkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuc3Vic2NyaWJlKCkNCiAgICB9LA0KICAgIHN1YnNjcmliZSgpIHsNCiAgICAgIGNvbnN0IGRhdGEgPSB7cHJvamVjdElkOiB0aGlzLnByb2plY3RJZCwgZW1haWw6IHRoaXMuc3Vic2NyaWJlckNvcHkuZW1haWwsIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJ30NCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KICAgICAgICBheGlvcyh7dXJsOiBBUElfRU5EUE9JTlRTLkNSRUFURV9TVUJTQ1JJQkVSLCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJ30pDQogICAgICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKQ0KICAgICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1lc3NhZ2UgPSAiU3Vic2NyaWJlZCBzdWNjZXNzZnVsbHkhIg0KICAgICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlID0gdHJ1ZQ0KICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJDb3B5LmVtYWlsID0gIiINCiAgICAgICAgICAgICAgdGhpcy5jbG9zZVNob3dNZXNzYWdlKCkNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3Vic2NyaWJlckFkZGVkJywgKHJlc3AuZGF0YSkpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNZXNzYWdlID0gIkZhaWxlZCB0byBzdWJzY3JpYmUuIg0KICAgICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlID0gdHJ1ZQ0KICAgICAgICAgICAgICB0aGlzLmNsb3NlU2hvd01lc3NhZ2UoKQ0KICAgICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBzYXZlU3Vic2NyaWJlcigpIHsNCiAgICAgIGNvbnN0IGRhdGEgPSB7cHJvamVjdElkOiB0aGlzLnByb2plY3RJZCwgZW1haWw6IHRoaXMuc3Vic2NyaWJlckNvcHkuZW1haWwsIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywNCiAgICAgICAgaXNFbmFibGVkOiB0aGlzLnN1YnNjcmliZXJDb3B5LmlzRW5hYmxlZCwgYXJ0aWNsZUN1cnNvcjogdGhpcy5zdWJzY3JpYmVyQ29weS5hcnRpY2xlQ3Vyc29yfQ0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7DQogICAgICAgIGF4aW9zKHt1cmw6IEFQSV9FTkRQT0lOVFMuVVBEQVRFX1NVQlNDUklCRVIsIGRhdGE6IGRhdGEsIG1ldGhvZDogJ1BVVCd9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgICAgIHJlc29sdmUocmVzcCkNCiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnN1YnNjcmliZXIsIHJlc3AuZGF0YSkNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3Vic2NyaWJlclVwZGF0ZWQnLCByZXNwLmRhdGEpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3Vic2NyaWJlckNvcHksIHRoaXMuc3Vic2NyaWJlcikNCiAgICBpZiAodGhpcy5zdWJzY3JpYmVyQ29weS5pc0VuYWJsZWQgPT0gIlllcyIgfHwgdGhpcy5zdWJzY3JpYmVyLmlzRW5hYmxlZCkgew0KICAgICAgdGhpcy5zdWJzY3JpYmVyQ29weS5pc0VuYWJsZWQgPSB0cnVlDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuc3Vic2NyaWJlckNvcHkuaXNFbmFibGVkID0gZmFsc2UNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["SubscriberCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SubscriberCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-card flat class=\"mx-auto\">\r\n    <v-card-title class=\"headline grey lighten-2\">\r\n      <v-icon left color=\"black\">mdi-file-document-edit-outline</v-icon>\r\n      <h3 v-if=\"!subscriberCopy.email\">New Subscriber</h3>\r\n      <h3 v-else>Edit Subscriber</h3>\r\n    </v-card-title>\r\n    <v-container>\r\n      <br>\r\n      <v-flex xs12 sm12>\r\n        <v-text-field\r\n            label=\"Email Address\"\r\n            placeholder=\"New subscriber\"\r\n            outlined\r\n            :prepend-inner-icon=\"!isEditing ? 'mdi-pencil-plus-outline' : ''\"\r\n            v-model=\"subscriberCopy.email\"\r\n            :disabled=\"isEditing\"\r\n            :rules=\"emailRules\"\r\n            block\r\n            required\r\n        >\r\n        </v-text-field>\r\n      </v-flex>\r\n      <v-row xs12 class=\"mx-auto\" v-if=\"isEditing\">\r\n        <v-flex xs6 sm6 pr-1>\r\n          <v-text-field\r\n              label=\"Current Article\"\r\n              placeholder=\"Article No.\"\r\n              outlined\r\n              prepend-inner-icon=\"mdi-pencil-plus-outline\"\r\n              v-model.number=\"subscriberCopy.articleCursor\"\r\n              :rules=\"articleCursorRules\"\r\n              block\r\n              required\r\n          >\r\n          </v-text-field>\r\n        </v-flex>\r\n        <v-flex xs6 sm6 pl-1>\r\n          <v-select\r\n              v-model=\"subscriberCopy.isEnabled\"\r\n              :items=\"subscriberStatus\"\r\n              item-text=\"option\"\r\n              item-value=\"value\"\r\n              label=\"Status\"\r\n              block\r\n              outlined\r\n          ></v-select>\r\n        </v-flex>\r\n      </v-row>\r\n      <v-flex xs12 sm12>\r\n        <div id=\"message\" v-if=\"showMessage\"\r\n             class=\"intro-eleven-Description alert alert-dismissible fade show small success\"\r\n             role=\"alert\"\r\n        >\r\n          <button type=\"button\" class=\"close\" @click=\"showMessage=false\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n          <strong>{{displayedMessage}}</strong>\r\n        </div>\r\n      </v-flex>\r\n      <v-row class=\"mx-auto\">\r\n        <v-btn class=\"ma-1\" tile outlined color=\"info\" @click=\"close\">Cancel</v-btn>\r\n        <v-spacer></v-spacer>\r\n        <v-btn v-if=\"!isEditing\" class=\"ma-1\" tile color=\"info\" @click=\"add\" :disabled=\"!isEmailValid(subscriberCopy.email)\">Add</v-btn>\r\n        <v-btn v-else class=\"ma-1\" dark tile color=\"info\" @click=\"save\">Save</v-btn>\r\n      </v-row>\r\n    </v-container>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport axios from \"axios\";\r\nimport {default as API_ENDPOINTS} from \"@/api\";\r\n\r\nexport default {\r\n  name: \"SubscriberCard\",\r\n  components: {},\r\n  props: [\r\n      'projectId',\r\n      'email',\r\n      'subscriber',\r\n      'isEditing'\r\n  ],\r\n  data() {\r\n    return {\r\n      subscriberCopy: {},\r\n      emailRules: [\r\n        v => !!v || \"Required\",\r\n        v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n      ],\r\n      articleCursorRules: [\r\n        v => !!v || \"Required\",\r\n        v => /^\\d+$/.test(v) || \"Article No. must be a number\"\r\n      ],\r\n      showMessage: false,\r\n      displayedMessage: \"\",\r\n      subscriberStatus: [\r\n        {option: \"Enabled\", value: true},\r\n        {option: \"Disabled\", value: false}\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('close')\r\n    },\r\n    closeShowMessage() {\r\n      setTimeout(() => {\r\n        this.showMessage = false\r\n      }, 6000)\r\n    },\r\n    isEmailValid(email) {\r\n      if (!(/.+@.+\\..+/.test(email))) {\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    isArticleCursorValid(articleNumber) {\r\n      if (!(/^\\d+$/.test(articleNumber))) {\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    save() {\r\n      if (!this.isArticleCursorValid(this.subscriberCopy.articleCursor)) {\r\n        return\r\n      }\r\n      this.saveSubscriber()\r\n    },\r\n    add() {\r\n      if (!this.isEmailValid(this.subscriberCopy.email)) {\r\n        return\r\n      }\r\n      this.subscribe()\r\n    },\r\n    subscribe() {\r\n      const data = {projectId: this.projectId, email: this.subscriberCopy.email, firstName: '', lastName: ''}\r\n      return new Promise((resolve) => {\r\n        axios({url: API_ENDPOINTS.CREATE_SUBSCRIBER, data: data, method: 'POST'})\r\n            .then(resp => {\r\n              resolve(resp)\r\n              this.displayedMessage = \"Subscribed successfully!\"\r\n              this.showMessage = true\r\n              this.subscriberCopy.email = \"\"\r\n              this.closeShowMessage()\r\n              this.$emit('subscriberAdded', (resp.data))\r\n            })\r\n            .catch(() => {\r\n              this.displayedMessage = \"Failed to subscribe.\"\r\n              this.showMessage = true\r\n              this.closeShowMessage()\r\n            })\r\n      })\r\n    },\r\n    saveSubscriber() {\r\n      const data = {projectId: this.projectId, email: this.subscriberCopy.email, firstName: '', lastName: '',\r\n        isEnabled: this.subscriberCopy.isEnabled, articleCursor: this.subscriberCopy.articleCursor}\r\n      return new Promise((resolve) => {\r\n        axios({url: API_ENDPOINTS.UPDATE_SUBSCRIBER, data: data, method: 'PUT'})\r\n            .then(resp => {\r\n              resolve(resp)\r\n              Object.assign(this.subscriber, resp.data)\r\n              this.$emit('subscriberUpdated', resp.data)\r\n            })\r\n            .catch(() => {\r\n            })\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    Object.assign(this.subscriberCopy, this.subscriber)\r\n    if (this.subscriberCopy.isEnabled == \"Yes\" || this.subscriber.isEnabled) {\r\n      this.subscriberCopy.isEnabled = true\r\n    } else {\r\n      this.subscriberCopy.isEnabled = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}