{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\UserBasicInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\UserBasicInfo.vue","mtime":1603786735877},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHtkZWZhdWx0IGFzIEFQSV9FTkRQT0lOVFN9IGZyb20gIkAvYXBpIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWNjb3VudEluZm86IHt9LA0KICAgICAgdXNlckluZm86IHsNCiAgICAgICAgZmlyc3ROYW1lOiAiIiwNCiAgICAgICAgbGFzdE5hbWU6ICIiLA0KICAgICAgICBwaG9uZU51bWJlcjogIiINCiAgICAgIH0sDQogICAgICBpc1VwZGF0aW5nOiBmYWxzZSwNCiAgICAgIHVwZGF0ZUJhc2ljSW5mb1JlcXVlc3Q6IHsNCiAgICAgICAgZW1haWw6IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwsDQogICAgICAgIHVzZXJJbmZvOiB7DQogICAgICAgICAgZW1haWw6IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICByZXF1aXJlZDogdmFsdWUgPT4gISF2YWx1ZSB8fCAiUmVxdWlyZWQuIiwNCiAgICAgIH0sDQogICAgICBpc0NoYW5nZUJhc2ljSW5mb1ZhbGlkOiBmYWxzZSwNCiAgICAgIHNuYWNrYmFyOiBmYWxzZSwNCiAgICAgIHF1aWNrTWVzc2FnZTogIiIsDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2hvd1F1aWNrTWVzc2FnZShtc2cpIHsNCiAgICAgIHRoaXMucXVpY2tNZXNzYWdlID0gbXNnDQogICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZQ0KICAgIH0sDQogICAgdXBkYXRlVXNlckJhc2ljSW5mbygpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLnVwZGF0ZUJhc2ljSW5mb0Zvcm0udmFsaWRhdGUoKSkgew0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWUNCiAgICAgICAgICB0aGlzLnVwZGF0ZUJhc2ljSW5mb1JlcXVlc3QudXNlckluZm8ubGFzdE5hbWUgPSB0aGlzLnVzZXJJbmZvLmxhc3ROYW1lDQogICAgICAgICAgdGhpcy51cGRhdGVCYXNpY0luZm9SZXF1ZXN0LnVzZXJJbmZvLmZpcnN0TmFtZSA9IHRoaXMudXNlckluZm8uZmlyc3ROYW1lDQogICAgICAgICAgdGhpcy51cGRhdGVCYXNpY0luZm9SZXF1ZXN0LnVzZXJJbmZvLnBob25lTnVtYmVyID0gdGhpcy51c2VySW5mby5waG9uZU51bWJlcg0KICAgICAgICAgIHRoaXMudXBkYXRlQmFzaWNJbmZvUmVxdWVzdC51c2VySW5mby5hZGRyZXNzID0gdGhpcy51c2VySW5mby5hZGRyZXNzDQogICAgICAgICAgYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5VUERBVEVfVVNFUl9JTkZPKHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwpLCBkYXRhOiB0aGlzLnVwZGF0ZUJhc2ljSW5mb1JlcXVlc3QsIG1ldGhvZDogJ1BVVCd9KQ0KICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3ApDQogICAgICAgICAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJJbmZvID0gcmVzcC5kYXRhDQogICAgICAgICAgICAgICAgdGhpcy5zaG93UXVpY2tNZXNzYWdlKCJZb3VyIGNvbnRhY3QgaW5mbyBpcyBjaGFuZ2VkIHN1Y2Nlc3NmdWxseS4iKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICByZWplY3QoZXJyKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zaG93UXVpY2tNZXNzYWdlKCJGYWlsZWQgdG8gY2hhbmdlIGNvbnRhY3QgaW5mby4iKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVhZEFjY291bnRJbmZvKCkgew0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gdHJ1ZQ0KICAgICAgICBjb25zdCBkYXRhID0ge3JlcXVlc3RlckVtYWlsOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsfQ0KICAgICAgICBheGlvcyh7dXJsOiBBUElfRU5EUE9JTlRTLlJFQURfQUNDT1VOVF9JTkZPKHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwpLCBwYXJhbXM6IGRhdGEsIG1ldGhvZDogJ0dFVCd9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgICAgIHJlc29sdmUocmVzcCkNCiAgICAgICAgICAgICAgdGhpcy5hY2NvdW50SW5mbyA9IHJlc3AuZGF0YQ0KICAgICAgICAgICAgICB0aGlzLnVzZXJJbmZvLmZpcnN0TmFtZSA9IHJlc3AuZGF0YS5maXJzdE5hbWUNCiAgICAgICAgICAgICAgdGhpcy51c2VySW5mby5sYXN0TmFtZSA9IHRoaXMuYWNjb3VudEluZm8ubGFzdE5hbWUNCiAgICAgICAgICAgICAgdGhpcy51c2VySW5mby5waG9uZU51bWJlciA9IHRoaXMuYWNjb3VudEluZm8ucGhvbmVOdW1iZXINCiAgICAgICAgICAgICAgdGhpcy51c2VySW5mby5hZGRyZXNzID0gdGhpcy5hY2NvdW50SW5mby5hZGRyZXNzDQogICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgIHJlamVjdChlcnIpDQogICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5yZWFkQWNjb3VudEluZm8oKQ0KICB9DQp9DQo="},{"version":3,"sources":["UserBasicInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserBasicInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container>\r\n    <v-card>\r\n      <v-card-text>\r\n        Use the form below to change the contact info for your account\r\n      </v-card-text>\r\n      <v-form ref=\"updateBasicInfoForm\" v-model=\"isChangeBasicInfoValid\" lazy-validation>\r\n        <v-text-field class=\"ml-10 mr-10\" v-model=\"updateBasicInfoRequest.email\" :rules=\"[rules.required]\" disabled color=\"blue-grey lighten-2\" label=\"Email\" outlined required dense></v-text-field>\r\n        <v-text-field class=\"ml-10 mr-10\" v-model=\"userInfo.firstName\" :rules=\"[rules.required]\" :disabled=\"isUpdating\" color=\"blue-grey lighten-2\" label=\"First name\" outlined required dense></v-text-field>\r\n        <v-text-field class=\"ml-10 mr-10\" v-model=\"userInfo.lastName\" :rules=\"[rules.required]\" :disabled=\"isUpdating\" color=\"blue-grey lighten-2\" label=\"Last name\" outlined required dense></v-text-field>\r\n        <v-text-field class=\"ml-10 mr-10\" v-model=\"userInfo.phoneNumber\" :disabled=\"isUpdating\" color=\"blue-grey lighten-2\" label=\"Phone number\" outlined dense></v-text-field>\r\n        <v-text-field class=\"ml-10 mr-10\" v-model=\"userInfo.address\" :disabled=\"isUpdating\" color=\"blue-grey lighten-2\" label=\"Address\" outlined dense></v-text-field>\r\n        <v-btn class=\"ml-10 mb-3\" tile :disabled=\"!isChangeBasicInfoValid || isUpdating\" @click=\"updateUserBasicInfo\">Save Changes</v-btn>\r\n      </v-form>\r\n    </v-card>\r\n    <v-layout>\r\n      <v-row>\r\n        <v-snackbar v-model=\"snackbar\" timeout=\"8000\" @click=\"snackbar=false\">\r\n          {{quickMessage}}\r\n          <template v-slot:action=\"{ attrs }\">\r\n            <v-btn\r\n                color=\"pink\"\r\n                text\r\n                v-bind=\"attrs\"\r\n                @click=\"snackbar = false\"\r\n            >\r\n              Close\r\n            </v-btn>\r\n          </template>\r\n        </v-snackbar>\r\n      </v-row>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {default as API_ENDPOINTS} from \"@/api\";\r\n\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      accountInfo: {},\r\n      userInfo: {\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        phoneNumber: \"\"\r\n      },\r\n      isUpdating: false,\r\n      updateBasicInfoRequest: {\r\n        email: this.$store.getters.email,\r\n        userInfo: {\r\n          email: this.$store.getters.email\r\n        },\r\n      },\r\n      rules: {\r\n        required: value => !!value || \"Required.\",\r\n      },\r\n      isChangeBasicInfoValid: false,\r\n      snackbar: false,\r\n      quickMessage: \"\",\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    showQuickMessage(msg) {\r\n      this.quickMessage = msg\r\n      this.snackbar = true\r\n    },\r\n    updateUserBasicInfo() {\r\n      if (this.$refs.updateBasicInfoForm.validate()) {\r\n        return new Promise((resolve, reject) => {\r\n          this.isUpdating = true\r\n          this.updateBasicInfoRequest.userInfo.lastName = this.userInfo.lastName\r\n          this.updateBasicInfoRequest.userInfo.firstName = this.userInfo.firstName\r\n          this.updateBasicInfoRequest.userInfo.phoneNumber = this.userInfo.phoneNumber\r\n          this.updateBasicInfoRequest.userInfo.address = this.userInfo.address\r\n          axios({url: API_ENDPOINTS.UPDATE_USER_INFO(this.$store.getters.email), data: this.updateBasicInfoRequest, method: 'PUT'})\r\n              .then(resp => {\r\n                resolve(resp)\r\n                this.isUpdating = false\r\n                this.userInfo = resp.data\r\n                this.showQuickMessage(\"Your contact info is changed successfully.\")\r\n              })\r\n              .catch(err => {\r\n                reject(err)\r\n                this.isUpdating = false\r\n                this.showQuickMessage(\"Failed to change contact info.\")\r\n              })\r\n        })\r\n      }\r\n    },\r\n    readAccountInfo() {\r\n      return new Promise((resolve, reject) => {\r\n        this.isUpdating = true\r\n        const data = {requesterEmail: this.$store.getters.email}\r\n        axios({url: API_ENDPOINTS.READ_ACCOUNT_INFO(this.$store.getters.email), params: data, method: 'GET'})\r\n            .then(resp => {\r\n              resolve(resp)\r\n              this.accountInfo = resp.data\r\n              this.userInfo.firstName = resp.data.firstName\r\n              this.userInfo.lastName = this.accountInfo.lastName\r\n              this.userInfo.phoneNumber = this.accountInfo.phoneNumber\r\n              this.userInfo.address = this.accountInfo.address\r\n              this.isUpdating = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isUpdating = false\r\n            })\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.readAccountInfo()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}