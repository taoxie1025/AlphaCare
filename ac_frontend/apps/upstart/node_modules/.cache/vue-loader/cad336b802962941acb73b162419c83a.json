{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\AdminTicketsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\AdminTicketsView.vue","mtime":1606025347209},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQge2RlZmF1bHQgYXMgQVBJX0VORFBPSU5UU30gZnJvbSAiLi4vYXBpIjsNCmltcG9ydCBUaWNrZXRCcmllZiBmcm9tICJAL2NvbXBvbmVudHMvVGlja2V0QnJpZWYiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHtUaWNrZXRCcmllZn0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhlYWRlcnM6IFsNCiAgICAgICAgeyB0ZXh0OiAnVHlwZScsIGFsaWduOiAnc3RhcnQnLCB2YWx1ZTogJ3RpY2tldFR5cGVMYWJlbCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnVXNlciBFbWFpbCcsIGFsaWduOiAnc3RhcnQnLCB2YWx1ZTogJ2VtYWlsJywgY2xhc3M6ICJncmV5IGxpZ2h0ZW4tNCJ9LA0KICAgICAgICB7IHRleHQ6ICdTdGF0dXMnLCBhbGlnbjogJ3N0YXJ0JywgdmFsdWU6ICd0aWNrZXRTdGF0dXNMYWJlbCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnUmVwbGllcycsIGFsaWduOiAnc3RhcnQnLCB2YWx1ZTogJ3JlcGx5JywgY2xhc3M6ICJncmV5IGxpZ2h0ZW4tNCJ9LA0KICAgICAgICB7IHRleHQ6ICdEYXRlIENyZWF0ZWQnLCBhbGlnbjogJ3N0YXJ0JywgdmFsdWU6ICdjcmVhdGVkQXRMYWJlbCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnVGl0bGUnLCBhbGlnbjogJ3N0YXJ0JywgdmFsdWU6ICd0aXRsZScsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnUHJvamVjdCBJRCcsIGFsaWduOiAnc3RhcnQnLCB2YWx1ZTogJ3Byb2plY3RJZCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnUHJvamVjdCBOYW1lJywgYWxpZ246ICdzdGFydCcsIHZhbHVlOiAncHJvamVjdE5hbWUnLCBjbGFzczogImdyZXkgbGlnaHRlbi00In0NCiAgICAgIF0sDQogICAgICB0b2tlbjogIiIsDQogICAgICBwYWdlU2l6ZTogMTUsDQogICAgICB0aWNrZXRzOiBbXSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UsDQogICAgICBzZWxlY3RlZFRpY2tldHM6IFtdLA0KICAgICAgdGlja2V0RmlsdGVyOiAiIiwNCiAgICAgIHRpY2tldEJyaWVmRGlhbG9nOiBmYWxzZSwNCiAgICAgIHBhbmVsczogMCwNCiAgICAgIGlzVXBkYXRpbmc6IGZhbHNlLA0KICAgICAgcXVpY2tNZXNzYWdlOiAiIiwNCiAgICAgIHNuYWNrYmFyOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB0aWNrZXRGaWx0ZXIoKSB7DQogICAgICBpZiAodGhpcy50aWNrZXRGaWx0ZXIgPT0gIiIpIHsNCiAgICAgICAgdGhpcy50aWNrZXRzID0gW10NCiAgICAgICAgdGhpcy5yZWFkVGlja2V0cygpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnRpY2tldHMgPSBbXQ0KICAgICAgICB0aGlzLnRva2VuID0gIiINCiAgICAgICAgdGhpcy5zZWFyY2hUaWNrZXRzKCkNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzaG93UXVpY2tNZXNzYWdlKG1zZykgew0KICAgICAgdGhpcy5xdWlja01lc3NhZ2UgPSBtc2cNCiAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlDQogICAgfSwNCiAgICBvbkFwcGVuZENvbW1lbnQoY29tbWVudCkgew0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gdHJ1ZQ0KICAgICAgICBjb25zdCBkYXRhID0gY29tbWVudA0KICAgICAgICBkYXRhLmVtYWlsID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbA0KICAgICAgICBkYXRhLm5hbWUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsDQogICAgICAgIGF4aW9zKHt1cmw6IEFQSV9FTkRQT0lOVFMuQ1JFQVRFX0NPTU1FTlQsIGRhdGE6IGRhdGEsIG1ldGhvZDogJ1BPU1QnfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gew0KICAgICAgICAgICAgICByZXNvbHZlKHJlc3ApDQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aWNrZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudGlja2V0c1tpXS50aWNrZXRJZCA9PSByZXNwLmRhdGEudGlja2V0SWQpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMudGlja2V0c1tpXS5jb21tZW50cy5wdXNoKHJlc3AuZGF0YSkNCiAgICAgICAgICAgICAgICAgIHRoaXMudGlja2V0c1tpXS5yZXBseSArPSAxDQogICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICByZWplY3QoZXJyKQ0KICAgICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICB0aGlzLnNob3dRdWlja01lc3NhZ2UoIkZhaWxlZCB0byByZXBseSB0aGUgdGlja2V0LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLiIpDQogICAgICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uVGlja2V0VXBkYXRlZCh1cGRhdGVkVGlja2V0KSB7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGlja2V0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy50aWNrZXRzW2ldLnRpY2tldElkID09IHVwZGF0ZWRUaWNrZXQudGlja2V0SWQpIHsNCiAgICAgICAgICB0aGlzLnRpY2tldHMuc3BsaWNlKGksIDEsIHVwZGF0ZWRUaWNrZXQpDQogICAgICAgICAgdGhpcy50aWNrZXRCcmllZkRpYWxvZyA9IGZhbHNlDQogICAgICAgICAgaWYgKHRoaXMudGlja2V0c1tpXS50aWNrZXRTdGF0dXMgIT0gMSkgew0KICAgICAgICAgICAgdGhpcy50aWNrZXRzLnNwbGljZShpLCAxKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBvblRpY2tldERlbGV0ZWQodGlja2V0SWQpIHsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aWNrZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh0aGlzLnRpY2tldHNbaV0udGlja2V0SWQgPT0gdGlja2V0SWQpIHsNCiAgICAgICAgICB0aGlzLnRpY2tldHMuc3BsaWNlKGksIDEpDQogICAgICAgICAgdGhpcy50aWNrZXRCcmllZkRpYWxvZyA9IGZhbHNlDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25DYW5jZWwoKSB7DQogICAgICB0aGlzLnRpY2tldEJyaWVmRGlhbG9nID0gZmFsc2UNCiAgICB9LA0KICAgIHJvd0NsaWNrKGl0ZW0pIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRUaWNrZXRzID0gW10NCiAgICAgIHRoaXMuc2VsZWN0ZWRUaWNrZXRzLnB1c2goaXRlbSkNCiAgICAgIHRoaXMudGlja2V0QnJpZWZEaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICBoaWdobGlnaHRDbGlja2VkUm93KGl0ZW0pIHsNCiAgICAgIGNvbnN0IHRyID0gaXRlbS50YXJnZXQucGFyZW50Tm9kZTsNCiAgICAgIHRyLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpOw0KICAgIH0sDQogICAgY2xlYXIoKSB7DQogICAgICB0aGlzLnRpY2tldEZpbHRlciA9ICIiDQogICAgfSwNCiAgICBzZWFyY2hUaWNrZXRzKCkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICB0aGlzLnRpY2tldHMgPSBbXQ0KICAgICAgdGhpcy5zZWxlY3RlZFRpY2tldHMgPSBbXQ0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgbGV0IGRhdGEgPSB7dGlja2V0RmlsdGVyOiB0aGlzLnRpY2tldEZpbHRlcn0NCiAgICAgICAgYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5BRE1JTl9TRUFSQ0hfVElDS0VUUywgcGFyYW1zOiBkYXRhLCBtZXRob2Q6ICdHRVQnIH0pDQogICAgICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKQ0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuZGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tldCA9IHsNCiAgICAgICAgICAgICAgICAgIGVtYWlsOiByZXNwLmRhdGFbaV0uZW1haWwsDQogICAgICAgICAgICAgICAgICByZXBseTogcmVzcC5kYXRhW2ldPy5jb21tZW50cz8ubGVuZ3RoLA0KICAgICAgICAgICAgICAgICAgdGlja2V0U3RhdHVzTGFiZWw6IHRoaXMuZ2V0VGlja2V0U3RhdHVzKHJlc3AuZGF0YS50aWNrZXRzW2ldLnRpY2tldFN0YXR1cyksDQogICAgICAgICAgICAgICAgICB0aWNrZXRTdGF0dXM6IHJlc3AuZGF0YS50aWNrZXRzW2ldLnRpY2tldFN0YXR1cywNCiAgICAgICAgICAgICAgICAgIHRpY2tldElkOiByZXNwLmRhdGFbaV0udGlja2V0SWQsDQogICAgICAgICAgICAgICAgICBjcmVhdGVkQXRMYWJlbDogdGhpcy5jb252ZXJ0RXBvY2hUb0RhdGVTdHJpbmcocmVzcC5kYXRhW2ldLmNyZWF0ZWRBdCksDQogICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHJlc3AuZGF0YVtpXS5jcmVhdGVkQXQsDQogICAgICAgICAgICAgICAgICB0aXRsZTogcmVzcC5kYXRhW2ldLnRpdGxlLA0KICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiByZXNwLmRhdGFbaV0ucHJvamVjdElkLA0KICAgICAgICAgICAgICAgICAgcHJvamVjdE5hbWU6IHJlc3AuZGF0YVtpXS5wcm9qZWN0TmFtZSwNCiAgICAgICAgICAgICAgICAgIHRpY2tldFR5cGVMYWJlbDogdGhpcy5nZXRUaWNrZXRUeXBlKHJlc3AuZGF0YVtpXS50aWNrZXRUeXBlKSwNCiAgICAgICAgICAgICAgICAgIHRpY2tldFR5cGU6IHJlc3AuZGF0YVtpXS50aWNrZXRUeXBlLA0KICAgICAgICAgICAgICAgICAgY29tbWVudHM6ICByZXNwLmRhdGFbaV0uY29tbWVudHMsDQogICAgICAgICAgICAgICAgICBib2R5OiAgcmVzcC5kYXRhW2ldLmJvZHkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy50aWNrZXRzLnB1c2godGlja2V0KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgcmVqZWN0KGVycikNCiAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBsb2FkTW9yZSgpIHsNCiAgICAgIGlmICh0aGlzLnRva2VuICE9ICJFT0YiICYmIHRoaXMudGlja2V0RmlsdGVyID09ICIiKSB7DQogICAgICAgIHRoaXMucmVhZFRpY2tldHMoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgdmFsaWRhdGVMb2dpbigpIHsNCiAgICAgIGlmICghdGhpcy4kc3RvcmUuZ2V0dGVycy5pc0xvZ2dlZEluIHx8ICF0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJub3Qgc2lnbmVkIGluICIpOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9LA0KICAgIHJlYWRUaWNrZXRzKCkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgICBlbWFpbDogdGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbCwNCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICB9DQogICAgICAgIGF4aW9zKHt1cmw6IEFQSV9FTkRQT0lOVFMuQURNSU5fUkVBRF9USUNLRVRTLCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJyB9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgICAgIHJlc29sdmUocmVzcCkNCiAgICAgICAgICAgICAgdGhpcy50b2tlbiA9IHJlc3AuZGF0YS50b2tlbg0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuZGF0YS50aWNrZXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgY29uc3QgdGlja2V0ID0gew0KICAgICAgICAgICAgICAgICAgZW1haWw6IHJlc3AuZGF0YS50aWNrZXRzW2ldLmVtYWlsLA0KICAgICAgICAgICAgICAgICAgcmVwbHk6IHJlc3AuZGF0YS50aWNrZXRzW2ldPy5jb21tZW50cy5sZW5ndGgsDQogICAgICAgICAgICAgICAgICB0aWNrZXRTdGF0dXNMYWJlbDogdGhpcy5nZXRUaWNrZXRTdGF0dXMocmVzcC5kYXRhLnRpY2tldHNbaV0udGlja2V0U3RhdHVzKSwNCiAgICAgICAgICAgICAgICAgIHRpY2tldFN0YXR1czogcmVzcC5kYXRhLnRpY2tldHNbaV0udGlja2V0U3RhdHVzLA0KICAgICAgICAgICAgICAgICAgdGlja2V0SWQ6IHJlc3AuZGF0YS50aWNrZXRzW2ldLnRpY2tldElkLA0KICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0TGFiZWw6IHRoaXMuY29udmVydEVwb2NoVG9EYXRlU3RyaW5nKHJlc3AuZGF0YS50aWNrZXRzW2ldLmNyZWF0ZWRBdCksDQogICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHJlc3AuZGF0YS50aWNrZXRzW2ldLmNyZWF0ZWRBdCwNCiAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwLmRhdGEudGlja2V0c1tpXS50aXRsZSwNCiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogcmVzcC5kYXRhLnRpY2tldHNbaV0ucHJvamVjdElkLA0KICAgICAgICAgICAgICAgICAgcHJvamVjdE5hbWU6IHJlc3AuZGF0YS50aWNrZXRzW2ldLnByb2plY3ROYW1lLA0KICAgICAgICAgICAgICAgICAgdGlja2V0VHlwZUxhYmVsOiB0aGlzLmdldFRpY2tldFR5cGUocmVzcC5kYXRhLnRpY2tldHNbaV0udGlja2V0VHlwZSksDQogICAgICAgICAgICAgICAgICB0aWNrZXRUeXBlOiByZXNwLmRhdGEudGlja2V0c1tpXS50aWNrZXRUeXBlLA0KICAgICAgICAgICAgICAgICAgY29tbWVudHM6IHJlc3AuZGF0YS50aWNrZXRzW2ldLmNvbW1lbnRzLA0KICAgICAgICAgICAgICAgICAgYm9keTogcmVzcC5kYXRhLnRpY2tldHNbaV0uYm9keQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnRpY2tldHMucHVzaCh0aWNrZXQpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICByZWplY3QoZXJyKQ0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldFRpY2tldFN0YXR1cyh0aWNrZXRTdGF0dXMpIHsNCiAgICAgIHN3aXRjaCh0aWNrZXRTdGF0dXMpIHsNCiAgICAgICAgY2FzZSAwOg0KICAgICAgICAgIHJldHVybiAiTm9uZSINCiAgICAgICAgY2FzZSAxOg0KICAgICAgICAgIHJldHVybiAiT3BlbiINCiAgICAgICAgY2FzZSAyOg0KICAgICAgICAgIHJldHVybiAiQ2xvc2VkIg0KICAgICAgICBjYXNlIDM6DQogICAgICAgICAgcmV0dXJuICJSZXNvbHZlZCINCiAgICAgICAgY2FzZSA0Og0KICAgICAgICAgIHJldHVybiAiRGVsZXRlZCINCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICByZXR1cm4gIk5vbmUiDQogICAgICB9DQogICAgfSwNCiAgICBnZXRUaWNrZXRUeXBlKHRpY2tldFR5cGUpIHsNCiAgICAgIHN3aXRjaCh0aWNrZXRUeXBlKSB7DQogICAgICAgIGNhc2UgMDoNCiAgICAgICAgICByZXR1cm4gIkdlbmVyYWwiDQogICAgICAgIGNhc2UgMToNCiAgICAgICAgICByZXR1cm4gIkJ1ZyINCiAgICAgICAgY2FzZSAyOg0KICAgICAgICAgIHJldHVybiAiUGF5bWVudCINCiAgICAgICAgY2FzZSAzOg0KICAgICAgICAgIHJldHVybiAiQVBJIg0KICAgICAgICBjYXNlIDQ6DQogICAgICAgICAgcmV0dXJuICJGZWF0dXJlIg0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIHJldHVybiAiTm9uZSINCiAgICAgIH0NCiAgICB9LA0KICAgIGNvbnZlcnRFcG9jaFRvRGF0ZVN0cmluZyh0aW1lc3RhbXApIHsNCiAgICAgIGlmICh0aW1lc3RhbXAgJiYgdGltZXN0YW1wID4gMCkgew0KICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKQ0KICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICItIg0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgew0KICAgIHRoaXMudmFsaWRhdGVMb2dpbigpDQoNCiAgICAvL2J5cGFzcyBqYXZhc2NyaXB0IG5vdCBlbmFibGVkIGlzc3VlDQogICAgaWYgKCF0aGlzLnRpY2tldHMgfHwgdGhpcy50aWNrZXRzLmxlbmd0aCA9PSAwKSB7DQogICAgICB0aGlzLnRpY2tldHMgPSBbXQ0KICAgICAgdGhpcy5sb2FkTW9yZSgpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["AdminTicketsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminTicketsView.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-app id=\"app\">\r\n    <v-container fluid>\r\n      <v-layout row wrap class=\"ma-1\">\r\n        <v-flex xs12>\r\n          <v-text-field\r\n              label=\"Ticket\"\r\n              placeholder=\"Search for ticket\"\r\n              outlined\r\n              prepend-inner-icon=\"mdi-magnify\"\r\n              :append-icon=\"ticketFilter != '' ? 'mdi-close' : ''\"\r\n              v-model=\"ticketFilter\"\r\n              @click:append=\"clear\"\r\n          >\r\n          </v-text-field>\r\n        </v-flex>\r\n        <v-flex xs12>\r\n          <v-data-table\r\n              @click:row=\"rowClick\"\r\n              v-model=\"selectedTickets\"\r\n              :headers=\"headers\"\r\n              :items=\"tickets\"\r\n              item-key=\"ticketId\"\r\n              :loading=\"isLoading\"\r\n              loading-text=\"Loading...\"\r\n              hide-default-footer\r\n              :server-items-length=\"pageSize\"\r\n              disable-sort\r\n              single-select\r\n              class=\"elevation-0\"\r\n              v-infinite-scroll=\"loadMore\"\r\n              infinite-scroll-disabled=\"busy\"\r\n              infinite-scroll-distance=\"10\"\r\n              infinite-scroll-immediate-check=\"false\"\r\n          >\r\n          </v-data-table>\r\n        </v-flex>\r\n      </v-layout>\r\n      <v-layout>\r\n        <v-flex justify=\"center\">\r\n          <v-dialog v-if=\"ticketBriefDialog\" v-model=\"ticketBriefDialog\" width=\"1000px\">\r\n            <v-card tile>\r\n              <v-expansion-panels id=\"panel\" v-model=\"panels\">\r\n                <v-expansion-panel>\r\n                  <ticket-brief\r\n                      :ticket=\"selectedTickets[0]\"\r\n                      @appendComment=\"onAppendComment\"\r\n                      @cancel=\"onCancel\"\r\n                      @ticketUpdated=\"onTicketUpdated\"\r\n                      @ticketDeleted=\"onTicketDeleted\">\r\n                  >\r\n                  </ticket-brief>\r\n                </v-expansion-panel>\r\n              </v-expansion-panels>\r\n            </v-card>\r\n          </v-dialog>\r\n        </v-flex>\r\n      </v-layout>\r\n      <v-snackbar v-model=\"snackbar\" timeout=\"8000\" @click=\"snackbar=false\">\r\n        {{quickMessage}}\r\n        <template v-slot:action=\"{ attrs }\">\r\n          <v-btn\r\n              color=\"pink\"\r\n              text\r\n              v-bind=\"attrs\"\r\n              @click=\"snackbar = false\"\r\n          >\r\n            Close\r\n          </v-btn>\r\n        </template>\r\n      </v-snackbar>\r\n    </v-container>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios\";\r\nimport {default as API_ENDPOINTS} from \"../api\";\r\nimport TicketBrief from \"@/components/TicketBrief\";\r\n\r\nexport default {\r\n  components: {TicketBrief},\r\n  data() {\r\n    return {\r\n      headers: [\r\n        { text: 'Type', align: 'start', value: 'ticketTypeLabel', class: \"grey lighten-4\"},\r\n        { text: 'User Email', align: 'start', value: 'email', class: \"grey lighten-4\"},\r\n        { text: 'Status', align: 'start', value: 'ticketStatusLabel', class: \"grey lighten-4\"},\r\n        { text: 'Replies', align: 'start', value: 'reply', class: \"grey lighten-4\"},\r\n        { text: 'Date Created', align: 'start', value: 'createdAtLabel', class: \"grey lighten-4\"},\r\n        { text: 'Title', align: 'start', value: 'title', class: \"grey lighten-4\"},\r\n        { text: 'Project ID', align: 'start', value: 'projectId', class: \"grey lighten-4\"},\r\n        { text: 'Project Name', align: 'start', value: 'projectName', class: \"grey lighten-4\"}\r\n      ],\r\n      token: \"\",\r\n      pageSize: 15,\r\n      tickets: [],\r\n      isLoading: false,\r\n      selectedTickets: [],\r\n      ticketFilter: \"\",\r\n      ticketBriefDialog: false,\r\n      panels: 0,\r\n      isUpdating: false,\r\n      quickMessage: \"\",\r\n      snackbar: false\r\n    }\r\n  },\r\n  watch: {\r\n    ticketFilter() {\r\n      if (this.ticketFilter == \"\") {\r\n        this.tickets = []\r\n        this.readTickets()\r\n      } else {\r\n        this.tickets = []\r\n        this.token = \"\"\r\n        this.searchTickets()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    showQuickMessage(msg) {\r\n      this.quickMessage = msg\r\n      this.snackbar = true\r\n    },\r\n    onAppendComment(comment) {\r\n      return new Promise((resolve, reject) => {\r\n        this.isUpdating = true\r\n        const data = comment\r\n        data.email = this.$store.getters.email\r\n        data.name = this.$store.getters.email\r\n        axios({url: API_ENDPOINTS.CREATE_COMMENT, data: data, method: 'POST'})\r\n            .then(resp => {\r\n              resolve(resp)\r\n              for (let i = 0; i < this.tickets.length; i++) {\r\n                if (this.tickets[i].ticketId == resp.data.ticketId) {\r\n                  this.tickets[i].comments.push(resp.data)\r\n                  this.tickets[i].reply += 1\r\n                  break\r\n                }\r\n              }\r\n              this.isUpdating = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isUpdating = false\r\n              this.showQuickMessage(\"Failed to reply the ticket, please try again later.\")\r\n            })\r\n      })\r\n    },\r\n    onTicketUpdated(updatedTicket) {\r\n      for (let i = 0; i < this.tickets.length; i++) {\r\n        if (this.tickets[i].ticketId == updatedTicket.ticketId) {\r\n          this.tickets.splice(i, 1, updatedTicket)\r\n          this.ticketBriefDialog = false\r\n          if (this.tickets[i].ticketStatus != 1) {\r\n            this.tickets.splice(i, 1)\r\n          }\r\n          break\r\n        }\r\n      }\r\n    },\r\n    onTicketDeleted(ticketId) {\r\n      for (let i = 0; i < this.tickets.length; i++) {\r\n        if (this.tickets[i].ticketId == ticketId) {\r\n          this.tickets.splice(i, 1)\r\n          this.ticketBriefDialog = false\r\n          break\r\n        }\r\n      }\r\n    },\r\n    onCancel() {\r\n      this.ticketBriefDialog = false\r\n    },\r\n    rowClick(item) {\r\n      this.selectedTickets = []\r\n      this.selectedTickets.push(item)\r\n      this.ticketBriefDialog = true\r\n    },\r\n    highlightClickedRow(item) {\r\n      const tr = item.target.parentNode;\r\n      tr.classList.add('highlight');\r\n    },\r\n    clear() {\r\n      this.ticketFilter = \"\"\r\n    },\r\n    searchTickets() {\r\n      this.isLoading = true\r\n      this.tickets = []\r\n      this.selectedTickets = []\r\n      return new Promise((resolve, reject) => {\r\n        let data = {ticketFilter: this.ticketFilter}\r\n        axios({url: API_ENDPOINTS.ADMIN_SEARCH_TICKETS, params: data, method: 'GET' })\r\n            .then(resp => {\r\n              resolve(resp)\r\n              for (let i = 0; i < resp.data.length; i++) {\r\n                const ticket = {\r\n                  email: resp.data[i].email,\r\n                  reply: resp.data[i]?.comments?.length,\r\n                  ticketStatusLabel: this.getTicketStatus(resp.data.tickets[i].ticketStatus),\r\n                  ticketStatus: resp.data.tickets[i].ticketStatus,\r\n                  ticketId: resp.data[i].ticketId,\r\n                  createdAtLabel: this.convertEpochToDateString(resp.data[i].createdAt),\r\n                  createdAt: resp.data[i].createdAt,\r\n                  title: resp.data[i].title,\r\n                  projectId: resp.data[i].projectId,\r\n                  projectName: resp.data[i].projectName,\r\n                  ticketTypeLabel: this.getTicketType(resp.data[i].ticketType),\r\n                  ticketType: resp.data[i].ticketType,\r\n                  comments:  resp.data[i].comments,\r\n                  body:  resp.data[i].body\r\n                }\r\n                this.tickets.push(ticket)\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isLoading = false\r\n            })\r\n      })\r\n    },\r\n    loadMore() {\r\n      if (this.token != \"EOF\" && this.ticketFilter == \"\") {\r\n        this.readTickets()\r\n      }\r\n    },\r\n    validateLogin() {\r\n      if (!this.$store.getters.isLoggedIn || !this.$store.getters.email) {\r\n        console.log(\"not signed in \");\r\n        this.$router.push('/')\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    readTickets() {\r\n      this.isLoading = true\r\n      return new Promise((resolve, reject) => {\r\n        let data = {\r\n          email: this.$store.getters.email,\r\n          pageSize: this.pageSize,\r\n          token: this.token\r\n        }\r\n        axios({url: API_ENDPOINTS.ADMIN_READ_TICKETS, data: data, method: 'POST' })\r\n            .then(resp => {\r\n              resolve(resp)\r\n              this.token = resp.data.token\r\n              for (let i = 0; i < resp.data.tickets.length; i++) {\r\n                const ticket = {\r\n                  email: resp.data.tickets[i].email,\r\n                  reply: resp.data.tickets[i]?.comments.length,\r\n                  ticketStatusLabel: this.getTicketStatus(resp.data.tickets[i].ticketStatus),\r\n                  ticketStatus: resp.data.tickets[i].ticketStatus,\r\n                  ticketId: resp.data.tickets[i].ticketId,\r\n                  createdAtLabel: this.convertEpochToDateString(resp.data.tickets[i].createdAt),\r\n                  createdAt: resp.data.tickets[i].createdAt,\r\n                  title: resp.data.tickets[i].title,\r\n                  projectId: resp.data.tickets[i].projectId,\r\n                  projectName: resp.data.tickets[i].projectName,\r\n                  ticketTypeLabel: this.getTicketType(resp.data.tickets[i].ticketType),\r\n                  ticketType: resp.data.tickets[i].ticketType,\r\n                  comments: resp.data.tickets[i].comments,\r\n                  body: resp.data.tickets[i].body\r\n                }\r\n                this.tickets.push(ticket)\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isLoading = false\r\n            })\r\n      })\r\n    },\r\n    getTicketStatus(ticketStatus) {\r\n      switch(ticketStatus) {\r\n        case 0:\r\n          return \"None\"\r\n        case 1:\r\n          return \"Open\"\r\n        case 2:\r\n          return \"Closed\"\r\n        case 3:\r\n          return \"Resolved\"\r\n        case 4:\r\n          return \"Deleted\"\r\n        default:\r\n          return \"None\"\r\n      }\r\n    },\r\n    getTicketType(ticketType) {\r\n      switch(ticketType) {\r\n        case 0:\r\n          return \"General\"\r\n        case 1:\r\n          return \"Bug\"\r\n        case 2:\r\n          return \"Payment\"\r\n        case 3:\r\n          return \"API\"\r\n        case 4:\r\n          return \"Feature\"\r\n        default:\r\n          return \"None\"\r\n      }\r\n    },\r\n    convertEpochToDateString(timestamp) {\r\n      if (timestamp && timestamp > 0) {\r\n        const date = new Date(timestamp)\r\n        return date.toLocaleDateString()\r\n      }\r\n      return \"-\"\r\n    }\r\n  },\r\n  created: function () {\r\n    this.validateLogin()\r\n\r\n    //bypass javascript not enabled issue\r\n    if (!this.tickets || this.tickets.length == 0) {\r\n      this.tickets = []\r\n      this.loadMore()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.v-text-field .v-icon {\r\n  color: grey !important;\r\n}\r\n.v-data-table .v-icon {\r\n  color: grey !important;\r\n}\r\n</style>\r\n"]}]}