{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\views\\Subscribers.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\views\\Subscribers.vue","mtime":1606007730446},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQge2RlZmF1bHQgYXMgQVBJX0VORFBPSU5UU30gZnJvbSAiLi4vYXBpIjsNCmltcG9ydCBTdWJzY3JpYmVyRm9ybSBmcm9tICJAL2NvbXBvbmVudHMvU3Vic2NyaWJlckNhcmQiOw0KaW1wb3J0IENvbmZpcm1EaWFsb2cgZnJvbSAiQC9jb21wb25lbnRzL0NvbmZpcm1EaWFsb2ciOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHtTdWJzY3JpYmVyRm9ybSwgQ29uZmlybURpYWxvZ30sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhlYWRlcnM6IFsNCiAgICAgICAgeyB0ZXh0OiAnRW1haWwnLCBhbGlnbjogJ3N0YXJ0JywgdmFsdWU6ICdlbWFpbCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnQ3VycmVudCBBcnRpY2xlIE5vLicsIGFsaWduOiAnY2VudGVyJywgdmFsdWU6ICdhcnRpY2xlQ3Vyc29yJywgY2xhc3M6ICJncmV5IGxpZ2h0ZW4tNCJ9LA0KICAgICAgICB7IHRleHQ6ICdMYXN0IEJyb2FkY2FzdCBEYXRlJywgYWxpZ246ICdjZW50ZXInLCB2YWx1ZTogJ2xhc3RCcm9hZGNhc3RUaW1lTXMnLCBjbGFzczogImdyZXkgbGlnaHRlbi00In0sDQogICAgICAgIHsgdGV4dDogJ1N1YnNjcmlwdGlvbiBEYXRlJywgYWxpZ246ICdjZW50ZXInLCB2YWx1ZTogJ2NyZWF0ZWRBdCcsIGNsYXNzOiAiZ3JleSBsaWdodGVuLTQifSwNCiAgICAgICAgeyB0ZXh0OiAnRW5hYmxlZCcsIGFsaWduOiAnZW5kJywgdmFsdWU6ICdpc0VuYWJsZWQnLCBjbGFzczogImdyZXkgbGlnaHRlbi00In0NCiAgICAgICAgXSwNCiAgICAgIHRva2VuOiAiIiwNCiAgICAgIHBhZ2VTaXplOiAxNSwNCiAgICAgIHN1YnNjcmliZXJzOiBbXSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UsDQogICAgICBzZWxlY3RlZFN1YnNjcmliZXJzOiBbXSwNCiAgICAgIGVtYWlsRmlsdGVyOiAiIiwNCiAgICAgIHN1YnNjcmliZXJFZGl0b3JEaWFsb2c6IGZhbHNlLA0KICAgICAgZGVsZXRlQ29uZmlybURpYWxvZzogZmFsc2UNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgZW1haWxGaWx0ZXIoKSB7DQogICAgICBpZiAodGhpcy5lbWFpbEZpbHRlciA9PSAiIikgew0KICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gW10NCiAgICAgICAgdGhpcy5yZWFkU3Vic2NyaWJlcnMoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdDQogICAgICAgIHRoaXMudG9rZW4gPSAiIg0KICAgICAgICB0aGlzLnNlYXJjaFN1YnNjcmliZXIoKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uU3Vic2NyaWJlclVwZGF0ZWQodXBkYXRlZFN1YnNjcmliZXIpIHsNCiAgICAgIHRoaXMuc3Vic2NyaWJlckVkaXRvckRpYWxvZyA9IGZhbHNlDQogICAgICBsZXQgaW5kZXggPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmliZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh0aGlzLnN1YnNjcmliZXJzW2ldLmVtYWlsID09IHVwZGF0ZWRTdWJzY3JpYmVyLmVtYWlsKSB7DQogICAgICAgICAgaW5kZXggPSBpDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHVwZGF0ZWRTdWJzY3JpYmVyLmlzRW5hYmxlZCkgew0KICAgICAgICB1cGRhdGVkU3Vic2NyaWJlci5pc0VuYWJsZWQgPSAiWWVzIg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdXBkYXRlZFN1YnNjcmliZXIuaXNFbmFibGVkID0gIk5vIg0KICAgICAgfQ0KICAgICAgdXBkYXRlZFN1YnNjcmliZXIuY3JlYXRlZEF0ID0gdGhpcy5jb252ZXJ0RXBvY2hUb0RhdGVTdHJpbmcodXBkYXRlZFN1YnNjcmliZXIuY3JlYXRlZEF0KQ0KICAgICAgdXBkYXRlZFN1YnNjcmliZXIubGFzdEJyb2FkY2FzdFRpbWVNcyA9IHRoaXMuY29udmVydEVwb2NoVG9EYXRlU3RyaW5nKHVwZGF0ZWRTdWJzY3JpYmVyLmxhc3RCcm9hZGNhc3RUaW1lTXMpDQogICAgICB0aGlzLnN1YnNjcmliZXJzLnNwbGljZShpbmRleCwgMSwgdXBkYXRlZFN1YnNjcmliZXIpDQogICAgfSwNCiAgICBvblN1YnNjcmliZXJBZGRlZChuZXdTdWJzY3JpYmVyKSB7DQogICAgICB0aGlzLnN1YnNjcmliZXJzLnVuc2hpZnQobmV3U3Vic2NyaWJlcikNCiAgICB9LA0KICAgIGRlbGV0ZUNvbmZpcm1lZCgpIHsNCiAgICAgIGxldCBpbmRleCA9IDA7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3Vic2NyaWJlcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlcnNbaV0uZW1haWwgPT0gdGhpcy5zZWxlY3RlZFN1YnNjcmliZXJzWzBdLmVtYWlsKSB7DQogICAgICAgICAgaW5kZXggPSBpDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5ERUxFVEVfU1VCU0NSSUJFUih0aGlzLiRyb3V0ZS5wYXJhbXMucHJvamVjdElkLCB0aGlzLnNlbGVjdGVkU3Vic2NyaWJlcnNbMF0uZW1haWwpLCBtZXRob2Q6ICdERUxFVEUnIH0pDQogICAgICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKQ0KICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLnNwbGljZShpbmRleCwgMSkNCiAgICAgICAgICAgICAgdGhpcy5kZWxldGVDb25maXJtRGlhbG9nID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgcmVqZWN0KGVycikNCiAgICAgICAgICAgICAgdGhpcy5kZWxldGVDb25maXJtRGlhbG9nID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0NvbmZpcm1EaWFsb2coKSB7DQogICAgICB0aGlzLmRlbGV0ZUNvbmZpcm1EaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICByb3dDbGljayhpdGVtKSB7DQogICAgICB0aGlzLnNlbGVjdGVkU3Vic2NyaWJlcnMgPSBbXQ0KICAgICAgdGhpcy5zZWxlY3RlZFN1YnNjcmliZXJzLnB1c2goaXRlbSkNCiAgICB9LA0KICAgIGhpZ2hsaWdodENsaWNrZWRSb3coaXRlbSkgew0KICAgICAgY29uc3QgdHIgPSBpdGVtLnRhcmdldC5wYXJlbnROb2RlOw0KICAgICAgdHIuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7DQogICAgfSwNCiAgICBzaG93QWRkU3Vic2NyaWJlckRpYWxvZygpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRTdWJzY3JpYmVycyA9IFtdDQogICAgICB0aGlzLnN1YnNjcmliZXJFZGl0b3JEaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICBzaG93U3Vic2NyaWJlckRpYWxvZ09uRWRpdCgpIHsNCiAgICAgIHRoaXMuc3Vic2NyaWJlckVkaXRvckRpYWxvZyA9IHRydWUNCiAgICB9LA0KICAgIGNsZWFyKCkgew0KICAgICAgdGhpcy5lbWFpbEZpbHRlciA9ICIiDQogICAgfSwNCiAgICBzZWFyY2hTdWJzY3JpYmVyKCkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICB0aGlzLnN1YnNjcmliZXJzID0gW10NCiAgICAgIHRoaXMuc2VsZWN0ZWRTdWJzY3JpYmVycyA9IFtdDQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IHtwcm9qZWN0SWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5wcm9qZWN0SWQsIGVtYWlsRmlsdGVyOiB0aGlzLmVtYWlsRmlsdGVyfQ0KICAgICAgICBheGlvcyh7dXJsOiBBUElfRU5EUE9JTlRTLlNFQVJDSF9TVUJTQ1JJQkVSUywgcGFyYW1zOiBkYXRhLCBtZXRob2Q6ICdHRVQnIH0pDQogICAgICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKQ0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuZGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSB7ZW1haWw6IHJlc3AuZGF0YVtpXS5lbWFpbCwNCiAgICAgICAgICAgICAgICAgIGFydGljbGVDdXJzb3I6IHJlc3AuZGF0YVtpXS5hcnRpY2xlQ3Vyc29yLA0KICAgICAgICAgICAgICAgICAgbGFzdEJyb2FkY2FzdFRpbWVNczogdGhpcy5jb252ZXJ0RXBvY2hUb0RhdGVTdHJpbmcocmVzcC5kYXRhW2ldLmxhc3RCcm9hZGNhc3RUaW1lTXMpLA0KICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNvbnZlcnRFcG9jaFRvRGF0ZVN0cmluZyhyZXNwLmRhdGFbaV0uY3JlYXRlZEF0KSwNCiAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZDogcmVzcC5kYXRhW2ldLmlzRW5hYmxlZCA/ICJZZXMiIDogIk5vIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcikNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgIHJlamVjdChlcnIpDQogICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgbG9hZE1vcmUoKSB7DQogICAgICBpZiAodGhpcy50b2tlbiAhPSAiRU9GIiAmJiB0aGlzLmVtYWlsRmlsdGVyID09ICIiKSB7DQogICAgICAgIHRoaXMucmVhZFN1YnNjcmliZXJzKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHZhbGlkYXRlTG9naW4oKSB7DQogICAgICBpZiAoIXRoaXMuJHN0b3JlLmdldHRlcnMuaXNMb2dnZWRJbiB8fCAhdGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbCkgew0KICAgICAgICBjb25zb2xlLmxvZygibm90IHNpZ25lZCBpbiAiKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlDQogICAgfSwNCiAgICByZWFkU3Vic2NyaWJlcnMoKSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIGxldCBkYXRhID0ge2VtYWlsOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsID8gdGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbCA6IHRoaXMucHJvamVjdC5lbWFpbCwNCiAgICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5wcm9qZWN0SWQsIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLA0KICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgIH0NCiAgICAgICAgYXhpb3Moe3VybDogQVBJX0VORFBPSU5UUy5SRUFEX1NVQlNDUklCRVJTLCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJyB9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgICAgIHJlc29sdmUocmVzcCkNCiAgICAgICAgICAgICAgdGhpcy50b2tlbiA9IHJlc3AuZGF0YS50b2tlbg0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuZGF0YS5zdWJzY3JpYmVycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSB7ZW1haWw6IHJlc3AuZGF0YS5zdWJzY3JpYmVyc1tpXS5lbWFpbCwNCiAgICAgICAgICAgICAgICAgIGFydGljbGVDdXJzb3I6IHJlc3AuZGF0YS5zdWJzY3JpYmVyc1tpXS5hcnRpY2xlQ3Vyc29yLA0KICAgICAgICAgICAgICAgICAgbGFzdEJyb2FkY2FzdFRpbWVNczogdGhpcy5jb252ZXJ0RXBvY2hUb0RhdGVTdHJpbmcocmVzcC5kYXRhLnN1YnNjcmliZXJzW2ldLmxhc3RCcm9hZGNhc3RUaW1lTXMpLA0KICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNvbnZlcnRFcG9jaFRvRGF0ZVN0cmluZyhyZXNwLmRhdGEuc3Vic2NyaWJlcnNbaV0uY3JlYXRlZEF0KSwNCiAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZDogcmVzcC5kYXRhLnN1YnNjcmliZXJzW2ldLmlzRW5hYmxlZCA/ICJZZXMiIDogIk5vIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcikNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgIHJlamVjdChlcnIpDQogICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgY29udmVydEVwb2NoVG9EYXRlU3RyaW5nKHRpbWVzdGFtcCkgew0KICAgICAgaWYgKHRpbWVzdGFtcCAmJiB0aW1lc3RhbXAgPiAwKSB7DQogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApDQogICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpDQogICAgICB9DQogICAgICByZXR1cm4gIi0iDQogICAgfQ0KICB9LA0KICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7DQogICAgdGhpcy52YWxpZGF0ZUxvZ2luKCkNCg0KICAgIC8vYnlwYXNzIGphdmFzY3JpcHQgbm90IGVuYWJsZWQgaXNzdWUNCiAgICBpZiAoIXRoaXMuc3Vic2NyaWJlcnMgfHwgdGhpcy5zdWJzY3JpYmVycy5sZW5ndGggPT0gMCkgew0KICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdDQogICAgICB0aGlzLmxvYWRNb3JlKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Subscribers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Subscribers.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-app id=\"app\">\r\n    <v-container fluid>\r\n      <v-layout row wrap class=\"ma-1\">\r\n        <v-flex xs12>\r\n          <h3>Subscribers</h3>\r\n        </v-flex>\r\n        <v-flex xs12>\r\n            <v-text-field\r\n                label=\"Email Address\"\r\n                placeholder=\"Search for subscriber\"\r\n                outlined\r\n                prepend-inner-icon=\"mdi-magnify\"\r\n                :append-icon=\"emailFilter != '' ? 'mdi-close' : ''\"\r\n                v-model=\"emailFilter\"\r\n                @click:append=\"clear\"\r\n            >\r\n            </v-text-field>\r\n        </v-flex>\r\n        <v-flex xs12 class=\"mb-3\">\r\n            <v-btn tile dark color=\"info\" @click=\"showAddSubscriberDialog\">\r\n              <v-icon left>mdi-plus-thick</v-icon>\r\n              Add subscriber\r\n            </v-btn>\r\n            <v-btn class=\"ma-1\" tile outlined color=\"info\" :disabled=\"selectedSubscribers.length==0\" @click=\"showSubscriberDialogOnEdit\">Edit</v-btn>\r\n            <v-btn class=\"ma-1\" tile outlined color=\"info\" :disabled=\"selectedSubscribers.length==0\" @click=\"showConfirmDialog\">Delete</v-btn>\r\n        </v-flex>\r\n        <v-flex xs12>\r\n          <v-data-table\r\n              @click:row=\"rowClick\"\r\n              v-model=\"selectedSubscribers\"\r\n              :headers=\"headers\"\r\n              :items=\"subscribers\"\r\n              item-key=\"email\"\r\n              :loading=\"isLoading\"\r\n              loading-text=\"Loading...\"\r\n              hide-default-footer\r\n              :server-items-length=\"pageSize\"\r\n              disable-sort\r\n              single-select\r\n              class=\"elevation-0\"\r\n              v-infinite-scroll=\"loadMore\"\r\n              infinite-scroll-disabled=\"busy\"\r\n              infinite-scroll-distance=\"10\"\r\n              infinite-scroll-immediate-check=\"false\"\r\n          >\r\n          </v-data-table>\r\n        </v-flex>\r\n       </v-layout>\r\n      <v-layout>\r\n        <v-flex justify=\"center\">\r\n          <v-dialog v-if=\"subscriberEditorDialog\" v-model=\"subscriberEditorDialog\" width=\"500px\">\r\n              <subscriber-form\r\n                  :projectId=\"$route.params.projectId\"\r\n                  :subscriber=\"selectedSubscribers.length>0 ? selectedSubscribers[0] : {}\"\r\n                  :isEditing=\"selectedSubscribers.length>0 ? true : false\"\r\n                  @close=\"subscriberEditorDialog=false\"\r\n                  @subscriberAdded=\"onSubscriberAdded\"\r\n                  @subscriberUpdated=\"onSubscriberUpdated\"></subscriber-form>\r\n          </v-dialog>\r\n        </v-flex>\r\n      </v-layout>\r\n      <v-layout>\r\n        <v-row justify=\"center\">\r\n          <v-dialog v-model=\"deleteConfirmDialog\" max-width=\"250\">\r\n            <confirm-dialog v-bind:title=\"`Are you sure?`\" :body=\"`The subscriber will no longer receive your content.`\" @yes=\"deleteConfirmed\" @no=\"deleteConfirmDialog=false\"></confirm-dialog>\r\n          </v-dialog>\r\n        </v-row>\r\n      </v-layout>\r\n    </v-container>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios\";\r\nimport {default as API_ENDPOINTS} from \"../api\";\r\nimport SubscriberForm from \"@/components/SubscriberCard\";\r\nimport ConfirmDialog from \"@/components/ConfirmDialog\";\r\n\r\nexport default {\r\n  components: {SubscriberForm, ConfirmDialog},\r\n  data() {\r\n    return {\r\n      headers: [\r\n        { text: 'Email', align: 'start', value: 'email', class: \"grey lighten-4\"},\r\n        { text: 'Current Article No.', align: 'center', value: 'articleCursor', class: \"grey lighten-4\"},\r\n        { text: 'Last Broadcast Date', align: 'center', value: 'lastBroadcastTimeMs', class: \"grey lighten-4\"},\r\n        { text: 'Subscription Date', align: 'center', value: 'createdAt', class: \"grey lighten-4\"},\r\n        { text: 'Enabled', align: 'end', value: 'isEnabled', class: \"grey lighten-4\"}\r\n        ],\r\n      token: \"\",\r\n      pageSize: 15,\r\n      subscribers: [],\r\n      isLoading: false,\r\n      selectedSubscribers: [],\r\n      emailFilter: \"\",\r\n      subscriberEditorDialog: false,\r\n      deleteConfirmDialog: false\r\n    }\r\n  },\r\n  watch: {\r\n    emailFilter() {\r\n      if (this.emailFilter == \"\") {\r\n        this.subscribers = []\r\n        this.readSubscribers()\r\n      } else {\r\n        this.subscribers = []\r\n        this.token = \"\"\r\n        this.searchSubscriber()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onSubscriberUpdated(updatedSubscriber) {\r\n      this.subscriberEditorDialog = false\r\n      let index = 0;\r\n      for (let i = 0; i < this.subscribers.length; i++) {\r\n        if (this.subscribers[i].email == updatedSubscriber.email) {\r\n          index = i\r\n          break\r\n        }\r\n      }\r\n      if (updatedSubscriber.isEnabled) {\r\n        updatedSubscriber.isEnabled = \"Yes\"\r\n      } else {\r\n        updatedSubscriber.isEnabled = \"No\"\r\n      }\r\n      updatedSubscriber.createdAt = this.convertEpochToDateString(updatedSubscriber.createdAt)\r\n      updatedSubscriber.lastBroadcastTimeMs = this.convertEpochToDateString(updatedSubscriber.lastBroadcastTimeMs)\r\n      this.subscribers.splice(index, 1, updatedSubscriber)\r\n    },\r\n    onSubscriberAdded(newSubscriber) {\r\n      this.subscribers.unshift(newSubscriber)\r\n    },\r\n    deleteConfirmed() {\r\n      let index = 0;\r\n      for (let i = 0; i < this.subscribers.length; i++) {\r\n        if (this.subscribers[i].email == this.selectedSubscribers[0].email) {\r\n          index = i\r\n          break\r\n        }\r\n      }\r\n      return new Promise((resolve, reject) => {\r\n        axios({url: API_ENDPOINTS.DELETE_SUBSCRIBER(this.$route.params.projectId, this.selectedSubscribers[0].email), method: 'DELETE' })\r\n            .then(resp => {\r\n              resolve(resp)\r\n              this.subscribers.splice(index, 1)\r\n              this.deleteConfirmDialog = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.deleteConfirmDialog = false\r\n            })\r\n      })\r\n    },\r\n    showConfirmDialog() {\r\n      this.deleteConfirmDialog = true\r\n    },\r\n    rowClick(item) {\r\n      this.selectedSubscribers = []\r\n      this.selectedSubscribers.push(item)\r\n    },\r\n    highlightClickedRow(item) {\r\n      const tr = item.target.parentNode;\r\n      tr.classList.add('highlight');\r\n    },\r\n    showAddSubscriberDialog() {\r\n      this.selectedSubscribers = []\r\n      this.subscriberEditorDialog = true\r\n    },\r\n    showSubscriberDialogOnEdit() {\r\n      this.subscriberEditorDialog = true\r\n    },\r\n    clear() {\r\n      this.emailFilter = \"\"\r\n    },\r\n    searchSubscriber() {\r\n      this.isLoading = true\r\n      this.subscribers = []\r\n      this.selectedSubscribers = []\r\n      return new Promise((resolve, reject) => {\r\n        let data = {projectId: this.$route.params.projectId, emailFilter: this.emailFilter}\r\n        axios({url: API_ENDPOINTS.SEARCH_SUBSCRIBERS, params: data, method: 'GET' })\r\n            .then(resp => {\r\n              resolve(resp)\r\n              for (let i = 0; i < resp.data.length; i++) {\r\n                const subscriber = {email: resp.data[i].email,\r\n                  articleCursor: resp.data[i].articleCursor,\r\n                  lastBroadcastTimeMs: this.convertEpochToDateString(resp.data[i].lastBroadcastTimeMs),\r\n                  createdAt: this.convertEpochToDateString(resp.data[i].createdAt),\r\n                  isEnabled: resp.data[i].isEnabled ? \"Yes\" : \"No\"\r\n                }\r\n                this.subscribers.push(subscriber)\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isLoading = false\r\n            })\r\n      })\r\n    },\r\n    loadMore() {\r\n      if (this.token != \"EOF\" && this.emailFilter == \"\") {\r\n        this.readSubscribers()\r\n      }\r\n    },\r\n    validateLogin() {\r\n      if (!this.$store.getters.isLoggedIn || !this.$store.getters.email) {\r\n        console.log(\"not signed in \");\r\n        this.$router.push('/')\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    readSubscribers() {\r\n      this.isLoading = true\r\n      return new Promise((resolve, reject) => {\r\n        let data = {email: this.$store.getters.email ? this.$store.getters.email : this.project.email,\r\n          projectId: this.$route.params.projectId, pageSize: this.pageSize,\r\n          token: this.token\r\n        }\r\n        axios({url: API_ENDPOINTS.READ_SUBSCRIBERS, data: data, method: 'POST' })\r\n            .then(resp => {\r\n              resolve(resp)\r\n              this.token = resp.data.token\r\n              for (let i = 0; i < resp.data.subscribers.length; i++) {\r\n                const subscriber = {email: resp.data.subscribers[i].email,\r\n                  articleCursor: resp.data.subscribers[i].articleCursor,\r\n                  lastBroadcastTimeMs: this.convertEpochToDateString(resp.data.subscribers[i].lastBroadcastTimeMs),\r\n                  createdAt: this.convertEpochToDateString(resp.data.subscribers[i].createdAt),\r\n                  isEnabled: resp.data.subscribers[i].isEnabled ? \"Yes\" : \"No\"\r\n                }\r\n                this.subscribers.push(subscriber)\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch(err => {\r\n              reject(err)\r\n              this.isLoading = false\r\n            })\r\n      })\r\n    },\r\n    convertEpochToDateString(timestamp) {\r\n      if (timestamp && timestamp > 0) {\r\n        const date = new Date(timestamp)\r\n        return date.toLocaleDateString()\r\n      }\r\n      return \"-\"\r\n    }\r\n  },\r\n  created: function () {\r\n    this.validateLogin()\r\n\r\n    //bypass javascript not enabled issue\r\n    if (!this.subscribers || this.subscribers.length == 0) {\r\n      this.subscribers = []\r\n      this.loadMore()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.v-text-field .v-icon {\r\n  color: grey !important;\r\n}\r\n.v-data-table .v-icon {\r\n  color: grey !important;\r\n}\r\n</style>\r\n"]}]}