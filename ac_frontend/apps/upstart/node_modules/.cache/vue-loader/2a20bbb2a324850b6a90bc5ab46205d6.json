{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Auth.vue","mtime":1621542642750},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb25maXJtRGlhbG9nIGZyb20gIi4vQ29uZmlybURpYWxvZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7ZGVmYXVsdCBhcyBBUElfRU5EUE9JTlRTfSBmcm9tICJAL2FwaSI7CmltcG9ydCB7IENyZWF0ZVVzZXJSZXF1ZXN0LCBMb2dpblVzZXJSZXF1ZXN0IH0gZnJvbSAiQC9jbGllbnQvdXNlcl9yZWdpc3RyeV9wYiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge0NvbmZpcm1EaWFsb2d9LAogIHByb3BzOiBbCiAgICAndGFiJwogIF0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVXBkYXRpbmc6IGZhbHNlLAogICAgICBpc1Bhc3N3b3JkUmVjb3ZlcjogZmFsc2UsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIHRhYnM6IFsKICAgICAgICB7bmFtZToiTG9naW4iLCBpY29uOiJtZGktYWNjb3VudCJ9LAogICAgICAgIHtuYW1lOiJSZWdpc3RlciIsIGljb246Im1kaS1hY2NvdW50LW91dGxpbmUifQogICAgICBdLAogICAgICB2YWxpZDogdHJ1ZSwKCiAgICAgIGZpcnN0TmFtZTogIiIsCiAgICAgIGxhc3ROYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHZlcmlmeTogIiIsCiAgICAgIGxvZ2luUGFzc3dvcmQ6ICIiLAogICAgICBsb2dpbkVtYWlsOiAiIiwKICAgICAgbG9naW5FbWFpbFJ1bGVzOiBbCiAgICAgICAgdiA9PiAhIXYgfHwgIlJlcXVpcmVkIiwKICAgICAgICB2ID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkUtbWFpbCBtdXN0IGJlIHZhbGlkIgogICAgICBdLAogICAgICBlbWFpbFJ1bGVzOiBbCiAgICAgICAgdiA9PiAhIXYgfHwgIlJlcXVpcmVkIiwKICAgICAgICB2ID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkUtbWFpbCBtdXN0IGJlIHZhbGlkIgogICAgICBdLAoKICAgICAgc2hvdzE6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIHJlcXVpcmVkOiB2YWx1ZSA9PiAhIXZhbHVlIHx8ICJSZXF1aXJlZC4iLAogICAgICAgIG1pbjogdiA9PiAodiAmJiB2Lmxlbmd0aCA+PSA0KSB8fCAiTWluIDQgY2hhcmFjdGVycyIKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGlzRW1haWwoZW1haWwpIHsKICAgICAgY29uc3QgcmUgPSAvXFMrQFxTK1wuXFMrLzsKICAgICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpOwogICAgfSwKICAgIHNlbmRSZXNldExpbmsoKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdGhpcy5pc1VwZGF0aW5nID0gdHJ1ZQogICAgICAgIGNvbnN0IGRhdGEgPSB7ZW1haWw6IHRoaXMubG9naW5FbWFpbH0KICAgICAgICBheGlvcyh7dXJsOiBBUElfRU5EUE9JTlRTLlJFU0VUX1BBU1NXT1JELCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJ30pCiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgICAgICAgIHJlc29sdmUocmVzcCkKICAgICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgcmVqZWN0KGVycikKICAgICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzaG93Rm9yZ290UGFzc3dvcmQoKSB7CiAgICAgIHRoaXMuaXNQYXNzd29yZFJlY292ZXIgPSAhdGhpcy5pc1Bhc3N3b3JkUmVjb3ZlcgogICAgfSwKICAgIHZhbGlkYXRlTG9naW4oKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy5zaWduaW4oKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlU2lnblVwKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5yZWdpc3RlckZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHRoaXMuc2lnbnVwKCk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgLy90aGlzLiRyZWZzLmxvZ2luRm9ybS5yZXNldCgpOwogICAgICB0aGlzLmxvZ2luUGFzc3dvcmQgPSAiIjsKICAgICAgdGhpcy5wYXNzd29yZCA9ICIiOwogICAgfSwKICAgIHJlc2V0VmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgfSwKICAgIHNpZ251cCgpIHsKICAgICAgbGV0IGNyZWF0ZVVzZXJSZXEgPSBuZXcgQ3JlYXRlVXNlclJlcXVlc3QoKQogICAgICBjcmVhdGVVc2VyUmVxLnNldEZpcnN0bmFtZSh0aGlzLmZpcnN0TmFtZSkKICAgICAgY3JlYXRlVXNlclJlcS5zZXRMYXN0bmFtZSh0aGlzLmxhc3ROYW1lKQogICAgICBjcmVhdGVVc2VyUmVxLnNldEVtYWlsKHRoaXMuZW1haWwpCiAgICAgIGNyZWF0ZVVzZXJSZXEuc2V0UGFzc3dvcmQodGhpcy5wYXNzd29yZCkKICAgICAgY3JlYXRlVXNlclJlcS5zZXRSZXR1cm51cmwoImh0dHA6Ly9sb2NhbGhvc3QiKSAvLyBUT0RPOiBzZXQgdGhpcwogICAgICBjcmVhdGVVc2VyUmVxLnNldFJlZnJlc2h1cmwoImh0dHA6Ly9sb2NhbGhvc3QiKQoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JlZ2lzdGVyJywgY3JlYXRlVXNlclJlcSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvZ2luRW1haWwgPSB0aGlzLmVtYWlsCiAgICAgICAgICB0aGlzLmxvZ2luUGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkCiAgICAgICAgICB0aGlzLnNpZ25pbigpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGlmIChlcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKCiAgICBzaWduaW4oKSB7CiAgICAgIGxldCBsb2dpblJlcSA9IG5ldyBMb2dpblVzZXJSZXF1ZXN0KCkKICAgICAgbG9naW5SZXEuc2V0RW1haWwodGhpcy5sb2dpbkVtYWlsKQogICAgICBsb2dpblJlcS5zZXRQYXNzd29yZCh0aGlzLmxvZ2luUGFzc3dvcmQpCgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9naW4nLCBsb2dpblJlcSkKICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Rhc2hib2FyZCcpCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIGlmIChlcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgICAgICAgIH0pCgogICAgfSwKCiAgfSwKICBjb21wdXRlZDogewogICAgcGFzc3dvcmRNYXRjaCgpIHsKICAgICAgcmV0dXJuICgpID0+IHRoaXMucGFzc3dvcmQgPT09IHRoaXMudmVyaWZ5IHx8ICJQYXNzd29yZCBtdXN0IG1hdGNoIjsKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n  <div id=\"app\">\r\n        <div>\r\n          <v-tabs v-model=\"tab\" show-arrows background-color=\"deep-purple accent-3\" icons-and-text dark grow>\r\n            <v-tabs-slider color=\"purple darken-4\"></v-tabs-slider>\r\n            <v-tab v-for=\"(tab,i) in tabs\" :key=\"tab+i\">\r\n              <v-icon large>{{ tab.icon }}</v-icon>\r\n              <div class=\"caption py-1\">{{ tab.name }}</div>\r\n            </v-tab>\r\n            <v-tab-item>\r\n              <v-card class=\"px-4\">\r\n                <v-card-text>\r\n                  <v-form ref=\"loginForm\" v-model=\"valid\" lazy-validation>\r\n                    <v-row>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"loginEmail\" :rules=\"loginEmailRules\" label=\"E-mail\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-if=\"!isPasswordRecover\" v-model=\"loginPassword\" :append-icon=\"show1?'eye':'eye-off'\" :rules=\"[rules.required, rules.min]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Password\" hint=\"At least 4 characters\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-col class=\"d-flex\" cols=\"12\" sm=\"3\" xsm=\"12\" align-end>\r\n                        <v-btn x-small block text  color=\"blue\" @click=\"showForgotPassword\" v-html=\"!isPasswordRecover ? `Forgot Password?` : `Login`\"></v-btn>\r\n                      </v-col>\r\n                      <v-spacer></v-spacer>\r\n                      <v-col class=\"d-flex\" cols=\"12\" sm=\"3\" xsm=\"12\" align-end>\r\n                        <v-btn v-if=\"!isPasswordRecover\" :disabled=\"!valid\" x-large block color=\"success\" @click=\"validateLogin\"> Login </v-btn>\r\n                        <v-btn v-else x-large block :disabled=\"isUpdating || !isEmail(loginEmail)\" color=\"success\" @click=\"dialog=true\"> Continue </v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-form>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-tab-item>\r\n            <v-tab-item>\r\n              <v-card class=\"px-4\">\r\n                <v-card-text>\r\n                  <v-form ref=\"registerForm\" v-model=\"valid\" lazy-validation>\r\n                    <v-row>\r\n                      <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                        <v-text-field v-model=\"firstName\" :rules=\"[rules.required]\" label=\"First Name\" maxlength=\"20\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                        <v-text-field v-model=\"lastName\" :rules=\"[rules.required]\" label=\"Last Name\" maxlength=\"20\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"email\" :rules=\"emailRules\" label=\"E-mail\" required></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field v-model=\"password\" :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\" :rules=\"[rules.required, rules.min]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Password\" hint=\"At least 4 characters\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field block v-model=\"verify\" :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\" :rules=\"[rules.required, passwordMatch]\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" label=\"Confirm Password\" counter @click:append=\"show1 = !show1\"></v-text-field>\r\n                      </v-col>\r\n                      <v-spacer></v-spacer>\r\n                      <v-col class=\"d-flex ml-auto\" cols=\"12\" sm=\"3\" xsm=\"12\">\r\n                        <v-btn x-large block :disabled=\"!valid\" color=\"success\" @click=\"validateSignUp\">Register</v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-form>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-tab-item>\r\n          </v-tabs>\r\n          <v-row justify=\"center\">\r\n            <v-dialog v-model=\"dialog\" max-width=\"350\">\r\n              <confirm-dialog v-bind:title=\"`Password Recovery`\" :body=\"`If you have an account with us, a link will be sent to your email to reset your password. The link will be expired in 1 hour.`\" @yes=\"sendResetLink\" @no=\"dialog=false\"></confirm-dialog>\r\n            </v-dialog>\r\n          </v-row>\r\n        </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import ConfirmDialog from \"./ConfirmDialog\";\r\n  import axios from \"axios\";\r\n  import {default as API_ENDPOINTS} from \"@/api\";\r\n  import { CreateUserRequest, LoginUserRequest } from \"@/client/user_registry_pb\";\r\n\r\n  export default {\r\n    components: {ConfirmDialog},\r\n    props: [\r\n      'tab'\r\n    ],\r\n    data() {\r\n      return {\r\n        isUpdating: false,\r\n        isPasswordRecover: false,\r\n        dialog: false,\r\n        tabs: [\r\n          {name:\"Login\", icon:\"mdi-account\"},\r\n          {name:\"Register\", icon:\"mdi-account-outline\"}\r\n        ],\r\n        valid: true,\r\n\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        verify: \"\",\r\n        loginPassword: \"\",\r\n        loginEmail: \"\",\r\n        loginEmailRules: [\r\n          v => !!v || \"Required\",\r\n          v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n        ],\r\n        emailRules: [\r\n          v => !!v || \"Required\",\r\n          v => /.+@.+\\..+/.test(v) || \"E-mail must be valid\"\r\n        ],\r\n\r\n        show1: false,\r\n        rules: {\r\n          required: value => !!value || \"Required.\",\r\n          min: v => (v && v.length >= 4) || \"Min 4 characters\"\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      isEmail(email) {\r\n        const re = /\\S+@\\S+\\.\\S+/;\r\n        return re.test(email);\r\n      },\r\n      sendResetLink() {\r\n        return new Promise((resolve, reject) => {\r\n          this.isUpdating = true\r\n          const data = {email: this.loginEmail}\r\n          axios({url: API_ENDPOINTS.RESET_PASSWORD, data: data, method: 'POST'})\r\n              .then(resp => {\r\n                resolve(resp)\r\n                this.isUpdating = false\r\n                this.dialog = false\r\n              })\r\n              .catch(err => {\r\n                reject(err)\r\n                this.isUpdating = false\r\n                this.dialog = false\r\n              })\r\n        })\r\n      },\r\n      showForgotPassword() {\r\n        this.isPasswordRecover = !this.isPasswordRecover\r\n      },\r\n      validateLogin() {\r\n        if (this.$refs.loginForm.validate()) {\r\n          this.signin();\r\n        }\r\n      },\r\n      validateSignUp() {\r\n        if (this.$refs.registerForm.validate()) {\r\n          this.signup();\r\n        }\r\n      },\r\n      reset() {\r\n        //this.$refs.loginForm.reset();\r\n        this.loginPassword = \"\";\r\n        this.password = \"\";\r\n      },\r\n      resetValidation() {\r\n        this.$refs.form.resetValidation();\r\n      },\r\n      signup() {\r\n        let createUserReq = new CreateUserRequest()\r\n        createUserReq.setFirstname(this.firstName)\r\n        createUserReq.setLastname(this.lastName)\r\n        createUserReq.setEmail(this.email)\r\n        createUserReq.setPassword(this.password)\r\n        createUserReq.setReturnurl(\"http://localhost\") // TODO: set this\r\n        createUserReq.setRefreshurl(\"http://localhost\")\r\n\r\n        this.$store.dispatch('register', createUserReq)\r\n          .then(() => {\r\n            this.loginEmail = this.email\r\n            this.loginPassword = this.password\r\n            this.signin()\r\n          })\r\n          .catch(err => {\r\n            if (err.length > 0) {\r\n              this.reset()\r\n            }\r\n          })\r\n      },\r\n\r\n      signin() {\r\n        let loginReq = new LoginUserRequest()\r\n        loginReq.setEmail(this.loginEmail)\r\n        loginReq.setPassword(this.loginPassword)\r\n\r\n        this.$store.dispatch('login', loginReq)\r\n                .then(() => {\r\n                  this.$router.push('/dashboard')\r\n                })\r\n                .catch(err => {\r\n                  if (err.length > 0) {\r\n                    this.reset()\r\n                  }\r\n                  this.reset()\r\n                })\r\n\r\n      },\r\n\r\n    },\r\n    computed: {\r\n      passwordMatch() {\r\n        return () => this.password === this.verify || \"Password must match\";\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    .v-content {\r\n      margin: 0;\r\n    }\r\n  }\r\n\r\n</style>\r\n"]}]}