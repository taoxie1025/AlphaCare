{"remainingRequest":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Gallery.vue?vue&type=style&index=0&id=15c1b052&scoped=true&lang=css&","dependencies":[{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\src\\components\\Gallery.vue","mtime":1602409945492},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Go\\src\\alphacare\\ac_frontend\\apps\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc2VsZWN0YWJsZSB7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KI3VwbG9hZEJ0biB7CiAgICB3aWR0aDogMTE1cHg7CiAgICBoZWlnaHQ6IDExNXB4Owp9Cg=="},{"version":3,"sources":["Gallery.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Gallery.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container>\r\n      <v-flex xs12>\r\n        <v-progress-linear :active=\"isLoading\" class=\"ma-0\" color=\"green lighten-3\" height=\"4\" indeterminate></v-progress-linear>\r\n        <input id=\"fileUpload\" type=\"file\" accept=\"image/*\" @change=\"previewFiles\" hidden>\r\n      </v-flex>\r\n      <v-alert v-if=\"showAlert\" type=\"error\">\r\n        Image size cannot exceed 2 MB\r\n      </v-alert>\r\n    <v-row class=\"ma-0\">\r\n        <v-img\r\n             class=\"ma-1 selectable\"\r\n             max-height=\"109\"\r\n             max-width=\"109\">\r\n          <v-btn color=\"primary\" id=\"uploadBtn\" @click=\"chooseFiles()\">\r\n              <v-icon>mdi-camera</v-icon>\r\n              Upload\r\n          </v-btn>\r\n        </v-img>\r\n        <v-img\r\n            v-for=\"(img, i) in images\"\r\n            :key=\"'img-' + i\"\r\n            :alt=\"img.alt\"\r\n            :src=\"img.src\"\r\n            class=\"ma-1 selectable\"\r\n            max-height=\"109\"\r\n            max-width=\"109\"\r\n            @click=\"selectImage(img)\"\r\n        >\r\n            <v-col class=\"text-right ml-3\">\r\n                <v-btn v-if=\"i > 6\" color=\"red\" icon small @click.stop=\"deleteFile(i)\">\r\n                    <v-icon>mdi-trash-can-outline</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n        </v-img>\r\n     </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\n    /**\r\n     * Example of a custom Image selector\r\n     * Key is to emit a select-file event when a file needs to be added\r\n     */\r\n    import { VImg } from 'vuetify/lib'\r\n    import axios from \"axios\";\r\n    import {default as API_ENDPOINTS} from \"../api\";\r\n    import store from \"../store/index\"\r\n    export default {\r\n        name: \"FileSelector\",\r\n        components: { VImg },\r\n        data() {\r\n            // Some public domain images from wikimedia.\r\n            return {\r\n                showAlert: false,\r\n                isLoading: false,\r\n                images: [\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Streifenhoernchen.jpg/1024px-Streifenhoernchen.jpg', alt: 'Siberian Chipmunk' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/NASA_Mars_Rover.jpg/750px-NASA_Mars_Rover.jpg', alt: 'NASA Mars Rover' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/d/dd/Muybridge_race_horse_animated.gif', alt: 'Muybridge race horse animated' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/2/2a/Locomotive_TEM2M-063_2006_G2.jpg', alt: 'Locomotive TEM2M-063 2006 G2' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/8/80/ISS_March_2009.jpg', alt: 'ISS March 2009' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/4/44/F-18F_after_launch_from_USS_Abraham_Lincoln_%28CVN-72%29.jpg', alt: 'F-18F after launch from USS Abraham Lincoln (CVN-72)' },\r\n                    { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Streifenhoernchen.jpg/1024px-Streifenhoernchen.jpg', alt: 'Siberian Chipmunk' }]\r\n            }\r\n        },\r\n        methods: {\r\n            selectImage(img) {\r\n                this.$emit('select-file', img);\r\n            },\r\n            chooseFiles() {\r\n                document.getElementById(\"fileUpload\").click()\r\n            },\r\n            previewFiles(event) {\r\n                const image = event?.target?.files[0]\r\n                if (image) {\r\n                    if (image.size / 1024 / 1024 >= 2) {\r\n                        this.showAlert = true\r\n                        setTimeout(() => {\r\n                            this.showAlert = false\r\n                        }, 4000)\r\n                    } else {\r\n                        this.uploadImage(image)\r\n                    }\r\n                }\r\n            },\r\n            uploadImage(image) {\r\n                this.isLoading = true\r\n                const formData = new FormData()\r\n                formData.append(\"file\", image)\r\n                formData.append(\"requesterEmail\", store.getters.email)\r\n                return new Promise((resolve, reject) => {\r\n                    axios({url: API_ENDPOINTS.UPLOAD_FILE, data: formData, method: 'POST' })\r\n                        .then(resp => {\r\n                            resolve(resp)\r\n                            const newImage = {src: resp.data.url, alt: resp.data.url}\r\n                            this.images.push(newImage)\r\n                            this.isLoading = false\r\n                        })\r\n                        .catch(err => {\r\n                            reject(err)\r\n                            this.isLoading = false\r\n                        })\r\n                })\r\n            },\r\n            listImages() {\r\n                return new Promise((resolve, reject) => {\r\n                    axios({\r\n                        url: API_ENDPOINTS.LIST_FILES(store.getters.email),\r\n                        params: {requesterEmail: store.getters.email},\r\n                        method: 'GET'\r\n                    }).then(resp => {\r\n                            resolve(resp)\r\n                            resp.data.forEach(item => {\r\n                                const newImage = {src: item.url, alt: \"\"}\r\n                                this.images.push(newImage)\r\n                            })\r\n                            this.isLoading = false\r\n                        }).catch(err => {\r\n                            reject(err)\r\n                            this.isLoading = false\r\n                        })\r\n                })\r\n            },\r\n            deleteFile(index) {\r\n                this.isLoading = true\r\n                const key = this.images[index].src?.split(store.getters.email + \"/\")[1]\r\n\r\n                return new Promise((resolve, reject) => {\r\n                    axios({\r\n                        url: API_ENDPOINTS.DELETE_FILE(store.getters.email, key),\r\n                        params: {requesterEmail: store.getters.email},\r\n                        method: 'DELETE'\r\n                    }).then(resp => {\r\n                            resolve(resp)\r\n                            this.images.splice(index, 1)\r\n                            this.isLoading = false\r\n                        }).catch(err => {\r\n                            reject(err)\r\n                            this.isLoading = false\r\n                        })\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.isLoading = true\r\n            this.listImages()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .selectable {\r\n        cursor: pointer;\r\n    }\r\n    #uploadBtn {\r\n        width: 115px;\r\n        height: 115px;\r\n    }\r\n</style>"]}]}